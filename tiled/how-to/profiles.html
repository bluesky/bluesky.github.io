

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Use Profiles to streamline Python client setup &mdash; tiled 0.1.0b30.dev12+g4bd45b37 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=32ad838b"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Use Performance and Debug Logging" href="client-logger.html" />
    <link rel="prev" title="Python Client Authentication" href="authentication.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            tiled
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/navigation.html">Navigate with the Python Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/slicing.html">Load Slices of Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/export.html">Deliberate Export</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/login.html">Log into an Authenticated Tiled Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/serving-files.html">Serve a Directory of Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/search.html">Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/writing.html">Writing Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/simple-server.html">Simple Tiled Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/plotly-integration.html">Plot Data in Plotly Chart Studio</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">How To Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Python Client Authentication</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Use Profiles to streamline Python client setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-problem-do-profiles-solve">What problem do profiles solve?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-a-profile">Create a profile</a></li>
<li class="toctree-l2"><a class="reference internal" href="#review-and-edit-profiles">Review and edit profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-options">Advanced Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#where-are-profiles-stored">Where are profiles stored?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#merging-rules">Merging rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-direct-profiles">Advanced: “Direct” Profiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reference">Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="client-logger.html">Use Performance and Debug Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">Run Tiled Server in a Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="helm.html">Run Tiled Server from the Helm chart</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Serve Data using Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="read-custom-formats.html">Serve Files with Custom Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom-export-formats.html">Add Custom Export Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="api-keys.html">Create and Use API Keys</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom-clients.html">Custom Python Client Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="metrics.html">Prometheus Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="direct-client.html">Use Tiled in Python without an HTTP server</a></li>
<li class="toctree-l1"><a class="reference internal" href="tiled-authn-database.html">Set up a database for a scaled authenticated deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="register.html">Register Content in Tiled</a></li>
<li class="toctree-l1"><a class="reference internal" href="retries.html">Control Retries</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Explanations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../explanations/architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/standards.html">Standards Used by Tiled</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/structures.html">Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/metadata.html">Metadata and “Specs”</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/compression.html">Compression</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/specialized-formats.html">Case Study: Reading and Exporting a Specialized Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/caching.html">Caches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/access-control.html">Access Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/catalog.html">Catalog Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/lineage.html">How Tiled Fits into the Ecosystem</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/service.html">Service-side Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/http-api-overview.html">HTTP API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/python-client.html">Python Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/queries.html">Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/authentication.html">Authentication Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/scopes.html">Scopes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/commandline.html">Command-line tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/service-configuration.html">Service Configuration Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/client-profiles.html">Client Profiles Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/release-history.html">Release History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/min-versions.html">Minimum Version of Python and NumPy</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">tiled</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Use Profiles to streamline Python client setup</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/how-to/profiles.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="use-profiles-to-streamline-python-client-setup">
<h1>Use Profiles to streamline Python client setup<a class="headerlink" href="#use-profiles-to-streamline-python-client-setup" title="Link to this heading"></a></h1>
<section id="what-problem-do-profiles-solve">
<h2>What problem do profiles solve?<a class="headerlink" href="#what-problem-do-profiles-solve" title="Link to this heading"></a></h2>
<p>Profiles provide a shorthand for constructing clients. A profile stores client
parameters in a file and gives them an alias, so that something like this:</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">tiled.client</span><span class="w"> </span><span class="kn">import</span> <span class="n">from_uri</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">tiled.client.cache</span><span class="w"> </span><span class="kn">import</span> <span class="n">Cache</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">from_uri</span><span class="p">(</span><span class="s2">&quot;https://tiled-demo.blueskyproject.io&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>can be replaced with the more memorable and succinct</p>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">tiled.client</span><span class="w"> </span><span class="kn">import</span> <span class="n">from_profile</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">from_profile</span><span class="p">(</span><span class="s2">&quot;demo&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="create-a-profile">
<h2>Create a profile<a class="headerlink" href="#create-a-profile" title="Link to this heading"></a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tiled profile create --name demo https://tiled-demo.blueskyproject.io
</pre></div>
</div>
</section>
<section id="review-and-edit-profiles">
<h2>Review and edit profiles<a class="headerlink" href="#review-and-edit-profiles" title="Link to this heading"></a></h2>
<p>To list the names of the profiles on your system, along with the path to the
file where each one is defined…</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tiled profile list
</pre></div>
</div>
<p>To show the contents of a profile…</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tiled profile show PROFILE_NAME
</pre></div>
</div>
<p>To open a profile in your default plain text editor…</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tiled profile edit PROFILE_NAME
</pre></div>
</div>
<p>See <code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">tiled</span> <span class="pre">profile</span> <span class="pre">--help</span></code> for more commands.</p>
</section>
<section id="advanced-options">
<h2>Advanced Options<a class="headerlink" href="#advanced-options" title="Link to this heading"></a></h2>
<p>You can edit the profile in a text editor to apply more advanced options.
See <a class="reference internal" href="../reference/client-profiles.html"><span class="doc">Client Profiles Reference</span></a> for a comprehensive reference.</p>
</section>
<section id="where-are-profiles-stored">
<h2>Where are profiles stored?<a class="headerlink" href="#where-are-profiles-stored" title="Link to this heading"></a></h2>
<p>Profiles are specified in YAML files located in any of several locations,
including:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">tiled</span><span class="o">/</span><span class="n">profiles</span>
<span class="o">~/.</span><span class="n">config</span><span class="o">/</span><span class="n">tiled</span><span class="o">/</span><span class="n">profiles</span>
</pre></div>
</div>
<p>Tiled will also look for profiles in locations specific to the
operating system and the software environment,
<a class="reference external" href="https://pypi.org/project/platformdirs/">in accordance</a> with
<a class="reference external" href="https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html">standards</a>.
To see the full list on your system:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tiled profile paths
</pre></div>
</div>
<p>Within these directories, you may have:</p>
<ul class="simple">
<li><p>Any number of configuration files</p></li>
<li><p>Named whatever you want</p></li>
<li><p>With one or more profiles per configuration file</p></li>
</ul>
<p>That is, you can keep one file with all your profiles or organize them
by grouping them into several separate files, named whatever you want.</p>
<p>The paths later in the list—“closer to the user”—take precedence in the
event of name collisions. See the section on Merging Rules below for details.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Tiled always looks in three places for profiles:</p>
<ol class="arabic simple">
<li><p>A system-wide directory. This is used by <em>administrators</em> to
distribute profiles that all users can see.</p></li>
<li><p>A directory in the currently active Python software environment
(for example, the conda environment). This is used by
<em>software packages</em> to distribute profiles that support their
software.</p></li>
<li><p>A user-controlled directory (a subdirectory of <code class="docutils literal notranslate"><span class="pre">$HOME</span></code>). This is
for users’ personal productivity.</p></li>
</ol>
<p>The default locations for (1) and (3) can be overridden by setting the
environment variables <code class="docutils literal notranslate"><span class="pre">TILED_SITE_PROFILES</span></code> and <code class="docutils literal notranslate"><span class="pre">TILED_PROFILES</span></code>, respectively,
to the desired path.</p>
</div>
</section>
<section id="merging-rules">
<h2>Merging rules<a class="headerlink" href="#merging-rules" title="Link to this heading"></a></h2>
<p>Situation #1: In the event of a name collision <em>within one file</em> like:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">my_profile</span><span class="p">:</span>
<span class="w">   </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="nt">my_proifile</span><span class="p">:</span><span class="w">  </span><span class="c1"># oops, reused the same name</span>
<span class="w">   </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
<p>the second one will win. (This is just how YAML works. We wish we could
issue a warning or something to let you know that something looks off,
but we have no way to do that without going to great lengths.)</p>
<p>Situation #2: In the event of a name collision between files in different
directories, the one in the directory “closer to the user”—later in the list
of paths—will take precedence. No warning will be issued. This the normal way
for users to override a default system- or environment-level configuration with
their own preferences.</p>
<p>Situation #3: In the event of a name collision between two files in the same directory:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># some/directory/some_profiles.yaml</span>
<span class="nt">my_profile</span><span class="p">:</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># some/directory/yet_more_profiles.yaml</span>
<span class="nt">my_profile</span><span class="p">:</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span>
</pre></div>
</div>
<p>Tiled has no way of guessing which is “right” so it refuses to load either one,
and it issues a warning indicating that this profile will be skipped until
the issue is resolved.</p>
<p>If the collision occurs in the system or software environment directory and you
do not have the access necessary to edit those configurations and resolve the
issue, you can override the problematic name by defining a new profile with that
name in your user configuration directory. As described in Situation #2, the version
in the user configuration directory will take precedence.  The collision will
therefore become irrelevant and will be ignored.</p>
<p>If the collision occurs in the user directory, then you (of course) have
the access necessary to fix it, and you should.</p>
</section>
<section id="advanced-direct-profiles">
<h2>Advanced: “Direct” Profiles<a class="headerlink" href="#advanced-direct-profiles" title="Link to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Return to this section after reading  <a class="reference internal" href="direct-client.html"><span class="doc">Use Tiled in Python without an HTTP server</span></a>.</p>
</div>
<p>For development and debugging, it can be convenient to place service and client
configuration together in a profile. To do this, include the special key
<code class="docutils literal notranslate"><span class="pre">direct:</span></code> with the <em>service-side</em> configuration nested inside of it.</p>
<p>Here is a complete example.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># profiles.yml</span>
<span class="nt">my_profile</span><span class="p">:</span>
<span class="w">  </span><span class="nt">direct</span><span class="p">:</span>
<span class="w">     </span><span class="nt">trees</span><span class="p">:</span>
<span class="w">       </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<span class="w">         </span><span class="nt">tree</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tiled.catalog:from_uri</span>
<span class="w">         </span><span class="nt">args</span><span class="p">:</span>
<span class="w">           </span><span class="nt">uri</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/catalog.db&quot;</span>
</pre></div>
</div>
<p>This takes the place of the <code class="docutils literal notranslate"><span class="pre">uri:</span></code> parameter. A profile must contain
<em>either</em> <code class="docutils literal notranslate"><span class="pre">uri:</span></code> or <code class="docutils literal notranslate"><span class="pre">direct:</span></code> but not both. It can sit alongside other
usual client-side configuration, such as</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># profiles.yml</span>
<span class="nt">my_profile</span><span class="p">:</span>
<span class="w">  </span><span class="nt">direct</span><span class="p">:</span>
<span class="w">    </span><span class="nt">trees</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<span class="w">        </span><span class="nt">tree</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tiled.catalog:from_uri</span>
<span class="w">        </span><span class="nt">args</span><span class="p">:</span>
<span class="w">          </span><span class="nt">directory</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/path/to/catalog.db&quot;</span>
<span class="w">  </span><span class="nt">cache</span><span class="p">:</span>
<span class="w">    </span><span class="nt">capacity</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2_000_000_000</span><span class="w"> </span><span class="c1"># 2 GB</span>
</pre></div>
</div>
</section>
<section id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Link to this heading"></a></h2>
<p>See <a class="reference internal" href="../reference/client-profiles.html"><span class="doc">Client Profiles Reference</span></a> for a comprehensive reference.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="authentication.html" class="btn btn-neutral float-left" title="Python Client Authentication" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="client-logger.html" class="btn btn-neutral float-right" title="Use Performance and Debug Logging" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Bluesky Collaboration.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>