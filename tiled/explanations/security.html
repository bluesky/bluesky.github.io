

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Security &mdash; tiled 0.1.0b11.dev23+ge52bab38 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=9ddc8b3e"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Compression" href="compression.html" />
    <link rel="prev" title="Metadata and “Specs”" href="metadata.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            tiled
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/navigation.html">Navigate with the Python Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/slicing.html">Load Slices of Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/export.html">Deliberate Export</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/login.html">Log into an Authenticated Tiled Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/serving-files.html">Serve a Directory of Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/search.html">Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/writing.html">Writing Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/plotly-integration.html">Plot Data in Plotly Chart Studio</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">How To Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../how-to/profiles.html">Use Profiles to streamline Python client setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/client-logger.html">Use Performance and Debug Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/docker.html">Run Tiled Server in a Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/configuration.html">Serve Data using Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/read-custom-formats.html">Serve Files with Custom Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/custom-export-formats.html">Add Custom Export Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/api-keys.html">Create and Use API Keys</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/custom-clients.html">Custom Python Client Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/metrics.html">Prometheus Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/direct-client.html">Use Tiled in Python without an HTTP server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/tiled-authn-database.html">Set up a database for a scaled authenticated deloyment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/register.html">Register Content in Tiled</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Explanations</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="standards.html">Standards Used by Tiled</a></li>
<li class="toctree-l1"><a class="reference internal" href="structures.html">Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata.html">Metadata and “Specs”</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Security</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#secure-single-user-server">Secure single-user server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#public-data-service">Public data service</a></li>
<li class="toctree-l2"><a class="reference internal" href="#private-multi-user-data-service">Private multi-user data service</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#authenticate-with-local-system-accounts">Authenticate with local system accounts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#authenticate-with-openid-connect-providers">Authenticate with OpenID Connect Providers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#toy-examples-for-testing-and-development">Toy examples for testing and development</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#multi-user-data-service-with-some-public-and-some-private-content">Multi-user data service with some public and some private content</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="compression.html">Compression</a></li>
<li class="toctree-l1"><a class="reference internal" href="specialized-formats.html">Case Study: Reading and Exporting a Specialized Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="caching.html">Caches</a></li>
<li class="toctree-l1"><a class="reference internal" href="access-control.html">Access Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="catalog.html">Catalog Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="lineage.html">How Tiled Fits into the Ecosystem</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/service.html">Service-side Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/http-api-overview.html">HTTP API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/python-client.html">Python Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/queries.html">Queries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/authentication.html">Authentication Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/scopes.html">Scopes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/commandline.html">Command-line tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/service-configuration.html">Service Configuration Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/client-profiles.html">Client Profiles Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/release-history.html">Release History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/min-versions.html">Minimum Version of Python and NumPy</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">tiled</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Security</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/explanations/security.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="security">
<h1>Security<a class="headerlink" href="#security" title="Link to this heading"></a></h1>
<p>Tiled employs modern web security standards to enforce access control with
minimum inconvenience to the user.</p>
<p>There are four use cases for the Tiled server.</p>
<ol class="arabic simple">
<li><p>Secure single-user server, analogous to how people use <code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">notebook</span></code></p></li>
<li><p>Public data service</p></li>
<li><p>Private multi-user data service</p></li>
<li><p>Multi-user data service with some public and some private content</p></li>
</ol>
<p>We address each in turn below.</p>
<section id="secure-single-user-server">
<h2>Secure single-user server<a class="headerlink" href="#secure-single-user-server" title="Link to this heading"></a></h2>
<p>In this mode, a single user or small group of highly trusted users have access
to a Tiled server protected by a secret access token. This is the default mode.
For those familiar with Jupyter, this is very similar to how
<code class="docutils literal notranslate"><span class="pre">jupyter</span> <span class="pre">notebook</span></code> works.</p>
<p>At startup, a secret token is generated and logged in the terminal.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tiled serve pyobject tiled.examples.generated_minimal:tree

    Use the following URL to connect to Tiled:

    &quot;http://127.0.0.1:8000?api_key=a4062c3dd6ab2af0d28fdb7eb278dd985c462ecf08d39f33233554c7fdaa42e7&quot;
</pre></div>
</div>
<p>where the token after <code class="docutils literal notranslate"><span class="pre">api_key=</span></code> will be different each time you start the
server. Once you have visited this URL with your web browser or the Tiled Python
client, a cookie will be set in your client and you won’t need to use the token
again. It is valid indefinitely.</p>
<p>For horizontally-scaled deployments where you need multiple instances of the
server to share the same secret, you can set it with a CLI option</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tiled</span> <span class="n">serve</span> <span class="o">...</span> <span class="o">--</span><span class="n">api</span><span class="o">-</span><span class="n">key</span><span class="o">=</span><span class="n">YOUR_SECRET</span>
</pre></div>
</div>
<p>or via an environment variable</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">TILED_SINGLE_USER_API_KEY</span><span class="o">=</span><span class="n">YOUR_SECRET</span> <span class="n">tiled</span> <span class="n">serve</span> <span class="o">...</span>
</pre></div>
</div>
<p>or via the configuration parameter</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">authentication</span><span class="p">:</span>
<span class="w">  </span><span class="nt">single_user_api_key</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;...&quot;</span>
</pre></div>
</div>
<p>When the secret is set manually it this way, it is <em>not</em> logged in the terminal.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When generating a secret, is important to produce a difficult-to-guess random
number, and make it different each time you start up a server.  Two equally good
ways to generate a secure secret…</p>
<p>With <code class="docutils literal notranslate"><span class="pre">openssl</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>openssl rand -hex 32
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">python</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python -c &quot;import secrets; print(secrets.token_hex(32))&quot;
</pre></div>
</div>
</div>
</section>
<section id="public-data-service">
<h2>Public data service<a class="headerlink" href="#public-data-service" title="Link to this heading"></a></h2>
<p>Tiled can serve a public data repository with no authentication required. To
launch it in this mode, use the <code class="docutils literal notranslate"><span class="pre">--public</span></code> flag as in</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tiled</span> <span class="n">serve</span> <span class="p">{</span><span class="n">pyobject</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">config</span><span class="p">}</span> <span class="o">--</span><span class="n">public</span> <span class="o">...</span>
</pre></div>
</div>
<p>When the server is started in this way, it will log a notice like
the following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tiled serve pyobject --public tiled.examples.generated_minimal:tree

    Tiled server is running in &quot;public&quot; mode, permitting open, anonymous access.
    Any data that is not specifically controlled with an access policy
    will be visible to anyone who can connect to this server.

</pre></div>
</div>
<p>Alternatively, if using a configuration file as in</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tiled</span> <span class="n">serve</span> <span class="n">config</span> <span class="o">...</span>
</pre></div>
</div>
<p>include the configuration:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">authentication</span><span class="p">:</span>
<span class="w">  </span><span class="nt">allow_anonymous_access</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
<p>This is a complete working example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># config.yml</span>
<span class="nt">authentication</span><span class="p">:</span>
<span class="w">  </span><span class="nt">allow_anonymous_access</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="nt">trees</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<span class="w">    </span><span class="nt">tree</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tiled.examples.generated_minimal:tree</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tiled</span> <span class="n">serve</span> <span class="n">config</span> <span class="n">config</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
<p>As above, a notice will be logged that the server is public.</p>
</section>
<section id="private-multi-user-data-service">
<h2>Private multi-user data service<a class="headerlink" href="#private-multi-user-data-service" title="Link to this heading"></a></h2>
<p>In this mode, users <em>must</em> log in to access anything other than the root <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/</span></code>
and documentation <code class="docutils literal notranslate"><span class="pre">GET</span> <span class="pre">/docs</span></code> routes.</p>
<p>Tiled is designed to integrate with external user-management systems via a pluggable
Authenticator interface. For those familiar with JupyterHub, these are very
similar to JupyterHub Authenticators. Authenticators fall into two groups:</p>
<ul class="simple">
<li><p>Authenticators that accept user credentials directly, following the OAuth2 and
OpenAPI standards as shown below, and validate the credentials using some
underlying authentication mechanism, such as PAM.</p></li>
<li><p>Authenticators that use an external service such as Google or ORCID to validate
the user identity, without directly handling credentials in Tiled.</p></li>
</ul>
<p>This mode requires configuration files to be used, as in</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tiled</span> <span class="n">serve</span> <span class="n">config</span> <span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">config_file</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>
</div>
<p>in order to specify the Authenticator and, when applicable, any parameters.
The shorthands <code class="docutils literal notranslate"><span class="pre">tiled</span> <span class="pre">serve</span> <span class="pre">pyobject</span> <span class="pre">...</span></code> and <code class="docutils literal notranslate"><span class="pre">tiled</span> <span class="pre">serve</span> <span class="pre">directory</span> <span class="pre">...</span></code>
do not currently support this mode. See below for complete working examples.</p>
<p>The server implements “sliding sessions”, meaning that the user provides their
login credentials once and the server keep their session alive for as long as
they are actively using it—up to some optional, configurable limit.</p>
<p>You may configure:</p>
<ul class="simple">
<li><p>The maximum time to keep an <em>inactive</em> session alive (default is one week)</p></li>
<li><p>The maximum session lifetime (default is unlimited)</p></li>
<li><p>Access token lifetime. This is internal from the user’s point of view
It should be short. (Default 15 minutes.)</p></li>
</ul>
<p>See <a class="reference internal" href="../reference/authentication.html"><span class="doc">Authentication Details</span></a> for advanced customization options and
additional details.</p>
<section id="authenticate-with-local-system-accounts">
<h3>Authenticate with local system accounts<a class="headerlink" href="#authenticate-with-local-system-accounts" title="Link to this heading"></a></h3>
<p>Tiled includes a <code class="docutils literal notranslate"><span class="pre">PAMAuthenticator</span></code> for logging in with local user accounts
using a username and password. It requires one additional dependency:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">pamela</span>
</pre></div>
</div>
<p>The configuration file(s) should include:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">authentication</span><span class="p">:</span>
<span class="w">  </span><span class="nt">authenticator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tiled.authenticators:PAMAuthenticator</span>
</pre></div>
</div>
<p>Here is a complete working example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># pam_config.yml</span>
<span class="nt">authentication</span><span class="p">:</span>
<span class="w">  </span><span class="nt">providers</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">authenticator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tiled.authenticators:PAMAuthenticator</span>
<span class="w">      </span><span class="c1"># This &#39;provider&#39; can be any string; it is used to differentiate</span>
<span class="w">      </span><span class="c1"># authentication providers when multiple ones are supported.</span>
<span class="w">      </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local</span>
<span class="nt">trees</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<span class="w">    </span><span class="nt">tree</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tiled.examples.generated_minimal:tree</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tiled</span> <span class="n">serve</span> <span class="n">config</span> <span class="n">pam_config</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
<p>Authenticate using a system user account and password.</p>
</section>
<section id="authenticate-with-openid-connect-providers">
<h3>Authenticate with OpenID Connect Providers<a class="headerlink" href="#authenticate-with-openid-connect-providers" title="Link to this heading"></a></h3>
<p>Tiled includes an <code class="docutils literal notranslate"><span class="pre">OIDCAuthenticator</span></code> for logging in with third-party identity
providers including ORCID, Google, and many others using the web standard OpenID
Connect. In this mode, Tiled does not directly handle users’ login credentials.
Instead, it provides a link to open in the browser, log in to the third-party
service, and obtain an access code that will be accepted by Tiled.</p>
<p>This uses the same technology that supports web-based flows like “Log in to
Website X with Google!” but it does so in a way that works from command-line
tools, scripts, Jupyter notebooks, and other applications. It works like this:</p>
<p>User: Hello, Tiled! Please let me in.
Tiled Server: Go to this URL and come back with an access code.
User (in web browser): Hello OIDC Provider {ORCID, Google, etc.}, Tiled sent me.
OIDC Provider: Do you authorize Tiled to see your account info?
User (in web browser): Yes.
OIDC Provider: <em>directs browser to Tiled Serer</em>
Tiled Server: The OIDC provider has vouched that you are {username}. Copy/paste
this access code.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">OIDCAuthenticator</span></code> requires an additional dependency. (Depending on how you
installed Tiled, you may already have it because it is required by Tiled’s
Python <em>client</em>.)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">httpx</span>
</pre></div>
</div>
<ol class="arabic">
<li><p>Deploy Tiled with HTTPS.</p></li>
<li><p>Register your application with the OIDC Provider. You will be asked to
provide redirect URIs. Enter two: <code class="docutils literal notranslate"><span class="pre">https://.../api/v1/auth/provider/SOME_NAME_HERE/code</span></code>
and <code class="docutils literal notranslate"><span class="pre">https://.../api/v1/auth/provider/SOME_NAME_HERE/device_code</span></code>. You will be given a
Client ID and Client Secret.</p></li>
<li><p>It is recommended to set the Client Secret as an environment variable, such
as <code class="docutils literal notranslate"><span class="pre">OIDC_CLIENT_SECRET</span></code>, and reference that from configuration file as shown
below.</p></li>
<li><p>Obtain the OIDC provider’s public key(s). These are published by the OIDC provider.
Starting from a URL like:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://accounts.google.com/.well-known/openid-configuration">https://accounts.google.com/.well-known/openid-configuration</a></p></li>
<li><p><a class="reference external" href="https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration">https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration</a></p></li>
<li><p><a class="reference external" href="https://orcid.org/.well-known/openid-configuration">https://orcid.org/.well-known/openid-configuration</a></p></li>
</ul>
<p>Navigate to the link under the key <code class="docutils literal notranslate"><span class="pre">jwks_uri</span></code>. These public key(s) are designed
to prevent man-in-the-middle attacks. They may be rotated over time.</p>
</li>
</ol>
<p>The configuration file(s) must include the following.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">authentication</span><span class="p">:</span>
<span class="w">  </span><span class="nt">providers</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SOME_NAME_HERE</span>
<span class="w">    </span><span class="nt">authenticator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tiled.authenticators:OIDCAuthenticator</span>
<span class="w">    </span><span class="nt">args</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># All of these are given by the OIDC provider you register</span>
<span class="w">      </span><span class="c1"># your application.</span>
<span class="w">      </span><span class="nt">client_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">      </span><span class="nt">client_secret</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${OIDC_CLIENT_SECRET}</span><span class="w">  </span><span class="c1"># reference an environment variable</span>
<span class="w">      </span><span class="c1"># These come from the OIDC provider as described above.</span>
<span class="w">      </span><span class="nt">token_uri</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">      </span><span class="nt">authorization_endpoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">      </span><span class="nt">public_keys</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">kty</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">          </span><span class="nt">e</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">          </span><span class="nt">use</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">          </span><span class="nt">kid</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">          </span><span class="nt">n</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">          </span><span class="nt">alg</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">      </span><span class="nt">confirmation_message</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;You</span><span class="nv"> </span><span class="s">have</span><span class="nv"> </span><span class="s">logged</span><span class="nv"> </span><span class="s">in</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">...</span><span class="nv"> </span><span class="s">as</span><span class="nv"> </span><span class="s">{id}.&quot;</span>
</pre></div>
</div>
<p>There are example configurations for ORCID and Google in the directory
<code class="docutils literal notranslate"><span class="pre">example_configs/</span></code> in the Tiled source repository.</p>
</section>
<section id="toy-examples-for-testing-and-development">
<h3>Toy examples for testing and development<a class="headerlink" href="#toy-examples-for-testing-and-development" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">DictionaryAuthenticator</span></code> authenticates using usernames and passwords
specified directly in the configuration. The passwords may be extracted from
environment variables, as shown. This is not a robust user management system and
should only for used for development and demos.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># dictionary_config.yml</span>
<span class="nt">authentication</span><span class="p">:</span>
<span class="w">  </span><span class="nt">providers</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">toy</span>
<span class="w">    </span><span class="nt">authenticator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tiled.authenticators:DictionaryAuthenticator</span>
<span class="w">    </span><span class="nt">args</span><span class="p">:</span>
<span class="w">      </span><span class="nt">users_to_passwords</span><span class="p">:</span>
<span class="w">        </span><span class="nt">alice</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${ALICE_PASSWORD}</span>
<span class="w">        </span><span class="nt">bob</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${BOB_PASSWORD}</span>
<span class="w">        </span><span class="nt">cara</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${CARA_PASSWORD}</span>
<span class="nt">trees</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<span class="w">    </span><span class="nt">tree</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tiled.examples.generated_minimal:tree</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ALICE_PASSWORD</span><span class="o">=</span><span class="n">secret1</span> <span class="n">BOB_PASSWORD</span><span class="o">=</span><span class="n">secret2</span> <span class="n">CARA_PASSWORD</span><span class="o">=</span><span class="n">secret3</span> <span class="n">tiled</span> <span class="n">serve</span> <span class="n">config</span> <span class="n">dictionary_config</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">DummyAuthenticator</span></code> accepts <em>any</em> username and password combination.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># dummy_config.yml</span>
<span class="nt">authentication</span><span class="p">:</span>
<span class="w">  </span><span class="nt">providers</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">provider</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">toy</span>
<span class="w">    </span><span class="nt">authenticator</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tiled.authenticators:DummyAuthenticator</span>
<span class="nt">trees</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/</span>
<span class="w">    </span><span class="nt">tree</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tiled.examples.generated_minimal:tree</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tiled</span> <span class="n">serve</span> <span class="n">config</span> <span class="n">dummy_config</span><span class="o">.</span><span class="n">yml</span>
</pre></div>
</div>
<p>To control which users can see which entries in the Trees, see
<a class="reference internal" href="access-control.html"><span class="doc">Access Control</span></a>.</p>
</section>
</section>
<section id="multi-user-data-service-with-some-public-and-some-private-content">
<h2>Multi-user data service with some public and some private content<a class="headerlink" href="#multi-user-data-service-with-some-public-and-some-private-content" title="Link to this heading"></a></h2>
<p>When an Authenticator is used in conjunction with <a class="reference internal" href="access-control.html"><span class="doc">Access Control</span></a>,
certain entries may be designated as “public”, visible to any user. By default,
visitors still need to be authenticated (as any user) to see these entries.
To make such entries visible to <em>anonymous</em>, unauthenticated users as well,
include the configuration:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">authentication</span><span class="p">:</span>
<span class="w">  </span><span class="nt">allow_anonymous_access</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
<p>See also <a class="reference internal" href="../reference/service-configuration.html"><span class="doc">Service Configuration Reference</span></a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="metadata.html" class="btn btn-neutral float-left" title="Metadata and “Specs”" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="compression.html" class="btn btn-neutral float-right" title="Compression" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Bluesky Collaboration.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>