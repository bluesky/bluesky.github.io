

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Search &mdash; tiled 0.1.0a10.post73+g6aad3eb documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/plot_directive.css" type="text/css" />
  <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Load Slices of Data" href="slicing.html" />
    <link rel="prev" title="Navigate a Catalog" href="navigation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> tiled
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0a10.post73+g6aad3eb
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Tutorials</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="navigation.html">Navigate a Catalog</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Search</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#search-using-the-python-client">Search Using the Python Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="#roadmap">Roadmap</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="slicing.html">Load Slices of Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="caching.html">Keep a Local Copy</a></li>
<li class="toctree-l1"><a class="reference internal" href="serving-files.html">Serve a Directory of Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotly-integration.html">Plot Data in Plotly Chart Studio</a></li>
</ul>
<p class="caption"><span class="caption-text">How To Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../how-to/configuration.html">Serve Catalogs using Configuration Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/direct-client.html">Use Tiled in Python without an HTTP server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to/scaling.html">Control Speed, Memory Usage, and Disk Usage</a></li>
</ul>
<p class="caption"><span class="caption-text">Explanations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../explanations/structures.html">Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/security.html">Security</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/access-control.html">Access Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../explanations/lineage.html">How Tiled Fits into the Ecosystem</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/service.html">Service-side Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/http-api-overview.html">HTTP API Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/python-client.html">Python Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/commandline.html">Command-line tool</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/design-documents/index.html">Design Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/release-history.html">Release History</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/min-versions.html">Minimum Version of Python and NumPy</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">tiled</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Search</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/tutorials/search.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="search">
<h1>Search<a class="headerlink" href="#search" title="Permalink to this headline">¶</a></h1>
<p>In this tutorial we will find a dataset in a Catalog by performing a search
over the entries’ metadata.</p>
<p>To follow along, start the Tiled server with the demo Catalog from a Terminal.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tiled</span> <span class="n">serve</span> <span class="n">pyobject</span> <span class="o">--</span><span class="n">public</span> <span class="n">tiled</span><span class="o">.</span><span class="n">examples</span><span class="o">.</span><span class="n">generated</span><span class="p">:</span><span class="n">demo</span>
</pre></div>
</div>
<div class="section" id="search-using-the-python-client">
<h2>Search Using the Python Client<a class="headerlink" href="#search-using-the-python-client" title="Permalink to this headline">¶</a></h2>
<p>Now, in a Python interpreter, connect with the Python client.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tiled.client</span> <span class="kn">import</span> <span class="n">from_uri</span>

<span class="n">catalog</span> <span class="o">=</span> <span class="n">from_uri</span><span class="p">(</span><span class="s2">&quot;http://localhost:8000&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Tiled has an extensible collection of queries. The client just has to
construct the query, and server sorts out how to execute it as
efficiently as possible given however the metadata and data are stored.</p>
<p>This subcatalog has four entries.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">catalog</span><span class="p">[</span><span class="s1">&#39;nested&#39;</span><span class="p">]</span>
<span class="go">&lt;Catalog {&#39;tiny&#39;, &#39;small&#39;, &#39;medium&#39;, &#39;large&#39;}&gt;</span>
</pre></div>
</div>
<p>Each has different metadata.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">catalog</span><span class="p">[</span><span class="s1">&#39;nested&#39;</span><span class="p">][</span><span class="s1">&#39;tiny&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">metadata</span>
<span class="go">DictView({&#39;fruit&#39;: &#39;apple&#39;, &#39;animal&#39;: &#39;bird&#39;})</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">catalog</span><span class="p">[</span><span class="s1">&#39;nested&#39;</span><span class="p">][</span><span class="s1">&#39;small&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">metadata</span>
<span class="go">DictView({&#39;fruit&#39;: &#39;banana&#39;, &#39;animal&#39;: &#39;cat&#39;})</span>

<span class="go"># etc.</span>
</pre></div>
</div>
<p>We’ll search among them for entries where the term <code class="docutils literal notranslate"><span class="pre">&quot;dog&quot;</span></code> appears
anywhere in the metadata.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tiled.queries</span> <span class="kn">import</span> <span class="n">FullText</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">catalog</span><span class="p">[</span><span class="s2">&quot;nested&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">FullText</span><span class="p">(</span><span class="s2">&quot;dog&quot;</span><span class="p">))</span>
<span class="go">&lt;Catalog {&#39;medium&#39;}&gt;</span>
</pre></div>
</div>
<p>The result is another catalog, with a subset of the entries or the original.
We might next stash it in a variable and drill further down.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">results</span> <span class="o">=</span> <span class="n">catalog</span><span class="p">[</span><span class="s1">&#39;nested&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">FullText</span><span class="p">(</span><span class="s2">&quot;dog&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span><span class="p">[</span><span class="s1">&#39;medium&#39;</span><span class="p">]</span>
<span class="go">&lt;Catalog {&#39;ones&#39;, &#39;tens&#39;, &#39;hundreds&#39;}&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span><span class="p">[</span><span class="s1">&#39;medium&#39;</span><span class="p">][</span><span class="s1">&#39;ones&#39;</span><span class="p">]</span>
<span class="go">&lt;ArrayClient&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">results</span><span class="p">[</span><span class="s1">&#39;medium&#39;</span><span class="p">][</span><span class="s1">&#39;ones&#39;</span><span class="p">][:]</span>
<span class="go">array([[0.90346422, 0.88209766, 0.50729484, ..., 0.85845848, 0.40995339,</span>
<span class="go">        0.62513141],</span>
<span class="go">       [0.69748695, 0.30697613, 0.52659964, ..., 0.99122457, 0.45656973,</span>
<span class="go">        0.28431247],</span>
<span class="go">       [0.3397253 , 0.62399495, 0.51621599, ..., 0.17175257, 0.31096683,</span>
<span class="go">        0.72702145],</span>
<span class="go">       ...,</span>
<span class="go">       [0.05031631, 0.04460506, 0.0942693 , ..., 0.7271035 , 0.53009248,</span>
<span class="go">        0.38832301],</span>
<span class="go">       [0.9703186 , 0.59947921, 0.9180047 , ..., 0.30109343, 0.23135718,</span>
<span class="go">        0.10103669],</span>
<span class="go">       [0.05446547, 0.58519701, 0.05065231, ..., 0.60261189, 0.90321973,</span>
<span class="go">        0.89681987]])</span>
</pre></div>
</div>
<p>Searches may be chained:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">catalog</span><span class="p">[</span><span class="s1">&#39;nested&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">FullText</span><span class="p">(</span><span class="s2">&quot;dog&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">FullText</span><span class="p">(</span><span class="s2">&quot;orange&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>If there no matches, the result is an empty catalog:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">catalog</span><span class="p">[</span><span class="s1">&#39;nested&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">FullText</span><span class="p">(</span><span class="s2">&quot;something that will not be found&quot;</span><span class="p">))</span>
<span class="go">&lt;Catalog {}&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="roadmap">
<h2>Roadmap<a class="headerlink" href="#roadmap" title="Permalink to this headline">¶</a></h2>
<p>Currently, <code class="docutils literal notranslate"><span class="pre">FullText</span></code> is the only outwardly-useful query supported. More
will be added, as well as documentation on how to register user-defined ones.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="slicing.html" class="btn btn-neutral float-right" title="Load Slices of Data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="navigation.html" class="btn btn-neutral float-left" title="Navigate a Catalog" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Bluesky Collaboration.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>