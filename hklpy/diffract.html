<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>diffract &mdash; hklpy 0+untagged.1.gb941e83 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="engine" href="engine.html" />
    <link rel="prev" title="context" href="context.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            hklpy
          </a>
              <div class="version">
                0+untagged.1.gb941e83
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Core Functionality</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">How to install <cite>hklpy</cite></a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Ready-to-Use Devices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="ready_to_use.html">Ready-to-Use Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/index.html">Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Notes</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="api.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="calc.html">calc</a></li>
<li class="toctree-l2"><a class="reference internal" href="context.html">context</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">diffract</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#energy">Energy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#engineering-units">Engineering Units</a></li>
<li class="toctree-l3"><a class="reference internal" href="#control-system-energy">Control System Energy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-hkl.diffract">Source code documentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id8">diffract</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hkl.diffract.Diffractometer"><code class="docutils literal notranslate"><span class="pre">Diffractometer</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="engine.html">engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="geometries.html">geometries</a></li>
<li class="toctree-l2"><a class="reference internal" href="sample.html">sample</a></li>
<li class="toctree-l2"><a class="reference internal" href="user.html">user</a></li>
<li class="toctree-l2"><a class="reference internal" href="util.html">util</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="release_notes.html">Release History</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">hklpy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="api.html">API Reference</a></li>
      <li class="breadcrumb-item active">diffract</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/diffract.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="diffract">
<span id="id1"></span><h1>diffract<a class="headerlink" href="#diffract" title="Permalink to this heading">Â¶</a></h1>
<p>A local subclass of <a class="reference internal" href="#hkl.diffract.Diffractometer" title="hkl.diffract.Diffractometer"><code class="xref py py-class docutils literal notranslate"><span class="pre">hkl.diffract.Diffractometer</span></code></a> for the desired
diffractometer geometry must be created to define the reciprocal-space
axes and customize the EPICS PVs used for the motor axes.  Other
capabilities are also customized in a local subclass.</p>
<p>Examples are provided in the
<a class="reference internal" href="geometries.html#geometries-examples"><span class="std std-ref">Geometries Examples</span></a> section.</p>
<p>These are the diffractometer geometries provided by the <strong>libhkl</strong>
library <a class="footnote-reference brackets" href="#libhkl" id="id2">1</a>:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 39%" />
<col style="width: 61%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>name</p></th>
<th class="head"><p>description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="geometries.html#hkl.geometries.E4CH" title="hkl.geometries.E4CH"><code class="xref py py-class docutils literal notranslate"><span class="pre">E4CH</span></code></a></p></td>
<td><p>Eulerian 4-circle, vertical scattering plane</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="geometries.html#hkl.geometries.E4CV" title="hkl.geometries.E4CV"><code class="xref py py-class docutils literal notranslate"><span class="pre">E4CV</span></code></a></p></td>
<td><p>Eulerian 4-circle, horizontal scattering plane</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="geometries.html#hkl.geometries.E6C" title="hkl.geometries.E6C"><code class="xref py py-class docutils literal notranslate"><span class="pre">E6C</span></code></a></p></td>
<td><p>Eulerian 6-circle</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="geometries.html#hkl.geometries.K4CV" title="hkl.geometries.K4CV"><code class="xref py py-class docutils literal notranslate"><span class="pre">K4CV</span></code></a></p></td>
<td><p>Kappa 4-circle, vertical scattering plane</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="geometries.html#hkl.geometries.K6C" title="hkl.geometries.K6C"><code class="xref py py-class docutils literal notranslate"><span class="pre">K6C</span></code></a></p></td>
<td><p>Kappa 6-circle</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="geometries.html#hkl.geometries.Zaxis" title="hkl.geometries.Zaxis"><code class="xref py py-class docutils literal notranslate"><span class="pre">Zaxis</span></code></a></p></td>
<td><p>Z-axis</p></td>
</tr>
</tbody>
</table>
<p>These special-use geometries are also provided by the <strong>libhkl</strong>
library <a class="footnote-reference brackets" href="#libhkl" id="id3">1</a>:</p>
<ul class="simple">
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Med2p3</span></code></p></li>
<li><p><a class="reference internal" href="geometries.html#hkl.geometries.Petra3_p09_eh2" title="hkl.geometries.Petra3_p09_eh2"><code class="xref py py-class docutils literal notranslate"><span class="pre">Petra3_p09_eh2</span></code></a></p></li>
<li><p><a class="reference internal" href="geometries.html#hkl.geometries.SoleilMars" title="hkl.geometries.SoleilMars"><code class="xref py py-class docutils literal notranslate"><span class="pre">SoleilMars</span></code></a></p></li>
<li><p><a class="reference internal" href="geometries.html#hkl.geometries.SoleilSiriusKappa" title="hkl.geometries.SoleilSiriusKappa"><code class="xref py py-class docutils literal notranslate"><span class="pre">SoleilSiriusKappa</span></code></a></p></li>
<li><p><a class="reference internal" href="geometries.html#hkl.geometries.SoleilSiriusTurret" title="hkl.geometries.SoleilSiriusTurret"><code class="xref py py-class docutils literal notranslate"><span class="pre">SoleilSiriusTurret</span></code></a></p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">SoleilSixs</span></code></p></li>
<li><p><a class="reference internal" href="geometries.html#hkl.geometries.SoleilSixsMed1p2" title="hkl.geometries.SoleilSixsMed1p2"><code class="xref py py-class docutils literal notranslate"><span class="pre">SoleilSixsMed1p2</span></code></a></p></li>
<li><p><a class="reference internal" href="geometries.html#hkl.geometries.SoleilSixsMed2p2" title="hkl.geometries.SoleilSixsMed2p2"><code class="xref py py-class docutils literal notranslate"><span class="pre">SoleilSixsMed2p2</span></code></a></p></li>
</ul>
<p>In all cases, see the <strong>libhkl</strong> documentation for further information
on these geometries.</p>
<dl class="footnote brackets">
<dt class="label" id="libhkl"><span class="brackets">1</span><span class="fn-backref">(<a href="#id2">1</a>,<a href="#id3">2</a>)</span></dt>
<dd><p><strong>libhkl</strong> documentation:
<a class="reference external" href="https://people.debian.org/~picca/hkl/hkl.html">https://people.debian.org/~picca/hkl/hkl.html</a></p>
</dd>
</dl>
<section id="energy">
<span id="diffract-energy"></span><h2>Energy<a class="headerlink" href="#energy" title="Permalink to this heading">Â¶</a></h2>
<p>The monochromatic X-ray energy used by the diffractometer is defined as
an ophyd <code class="docutils literal notranslate"><span class="pre">Signal</span></code>.  The <code class="docutils literal notranslate"><span class="pre">.energy</span></code> signal may be used as-provided, as
a constant or the Component may be replaced by an <code class="docutils literal notranslate"><span class="pre">ophyd.EpicsSignal</span></code>
in a custom subclass of <a class="reference internal" href="#hkl.diffract.Diffractometer" title="hkl.diffract.Diffractometer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Diffractometer</span></code></a>, to
connect with an EPICS PV from the instrumentâs control system.  There is
no corresponding <code class="docutils literal notranslate"><span class="pre">.wavelength</span></code> signal at the diffractometer level.
The <code class="docutils literal notranslate"><span class="pre">.energy_offset</span></code> signal is used to allow for a difference between
the reported energy of <code class="docutils literal notranslate"><span class="pre">.energy</span></code> and the energy used for
diffractometer operations <code class="docutils literal notranslate"><span class="pre">.calc.energy</span></code>.</p>
<p>These are the terms:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 77%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>term</p></th>
<th class="head"><p>meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">.energy</span></code></p></td>
<td><p>nominal energy (such as value reported by control system)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">.energy_offset</span></code></p></td>
<td><p>adjustment from nominal to calibrated energy for diffraction</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">.energy_units</span></code></p></td>
<td><p>engineering units to be used for <code class="docutils literal notranslate"><span class="pre">.energy</span></code> and <code class="docutils literal notranslate"><span class="pre">.energy_offset</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">.calc.energy</span></code></p></td>
<td><p>energy for diffraction (used to compute wavelength)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">.calc.wavelength</span></code></p></td>
<td><p>used for diffraction calculations</p></td>
</tr>
</tbody>
</table>
<p>These are the relationships:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">energy</span> <span class="o">=</span> <span class="n">in_keV</span><span class="p">(</span><span class="o">.</span><span class="n">energy</span> <span class="o">+</span> <span class="o">.</span><span class="n">energy_offset</span><span class="p">)</span>
<span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">wavelength</span> <span class="o">=</span> <span class="n">A</span><span class="o">*</span><span class="n">keV</span> <span class="o">/</span> <span class="o">.</span><span class="n">calc</span><span class="o">.</span><span class="n">energy</span>
</pre></div>
</div>
<p>For use with other types of radiation (such as neutrons or electrons),
the conversion between energy and wavelength must be changed by editing
the energy and wavelength methods in the <a class="reference internal" href="calc.html#hkl.calc.CalcRecip" title="hkl.calc.CalcRecip"><code class="xref py py-class docutils literal notranslate"><span class="pre">hkl.calc.CalcRecip</span></code></a>
class.</p>
<p>When the Diffractometer <code class="docutils literal notranslate"><span class="pre">.energy</span></code> signal is written (via
<code class="docutils literal notranslate"><span class="pre">.energy.put(value)</span></code> operation), the <code class="docutils literal notranslate"><span class="pre">.energy_offset</span></code> is added.
This result is converted to <code class="docutils literal notranslate"><span class="pre">keV</span></code> as required by the lower-level
<a class="reference internal" href="calc.html#module-hkl.calc" title="hkl.calc"><code class="xref py py-mod docutils literal notranslate"><span class="pre">hkl.calc</span></code></a> module, and then written to <code class="docutils literal notranslate"><span class="pre">.calc.energy</span></code> which in
turn writes the <code class="docutils literal notranslate"><span class="pre">.calc.wavelength</span></code> value. Likewise, when
<code class="docutils literal notranslate"><span class="pre">.energy.get()</span></code> reads the energy, it takes its value from
<code class="docutils literal notranslate"><span class="pre">.calc.energy</span></code>, converts into <code class="docutils literal notranslate"><span class="pre">.energy_units</span></code>, and then applies
<code class="docutils literal notranslate"><span class="pre">.energy_offset</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>How to set energy, offset, and units</p>
<p>To change energy, offset, &amp; units, do it in this order:</p>
<ul class="simple">
<li><p>First, set units and offset</p></li>
<li><p>Finally, set energy</p></li>
</ul>
<p>Example for a <code class="docutils literal notranslate"><span class="pre">e4cv</span></code> diffractometer:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">e4cv</span><span class="o">.</span><span class="n">energy_units</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;eV&quot;</span><span class="p">)</span>
<span class="n">e4cv</span><span class="o">.</span><span class="n">energy_offset</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">e4cv</span><span class="o">.</span><span class="n">energy</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="mi">8000</span><span class="p">)</span>
<span class="c1"># now, e4cv.calc.energy = 8.0015 keV</span>
</pre></div>
</div>
</div>
</section>
<section id="engineering-units">
<span id="diffract-energy-units"></span><h2>Engineering Units<a class="headerlink" href="#engineering-units" title="Permalink to this heading">Â¶</a></h2>
<p>The <a class="reference internal" href="geometries.html#module-hkl.geometries" title="hkl.geometries"><code class="xref py py-mod docutils literal notranslate"><span class="pre">geometries</span></code></a> module is the main user interface, providing
the various diffractometer geometries provided by <strong>libhkl</strong> as <em>ophyd</em>
<cite>PseudoPositioner</cite> Devices <a class="footnote-reference brackets" href="#id6" id="id4">2</a>.  Each of these geometries is built from
the base class <a class="reference internal" href="#hkl.diffract.Diffractometer" title="hkl.diffract.Diffractometer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Diffractometer</span></code></a>, where a feature
has been added to allow the energy units to be set by the user.
Internally, <a class="reference internal" href="#hkl.diffract.Diffractometer" title="hkl.diffract.Diffractometer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Diffractometer</span></code></a> will apply any
necessary units conversion when interacting with the values from the
<a class="reference internal" href="calc.html#module-hkl.calc" title="hkl.calc"><code class="xref py py-mod docutils literal notranslate"><span class="pre">calc</span></code></a> module.</p>
<p>In the <a class="reference internal" href="calc.html#module-hkl.calc" title="hkl.calc"><code class="xref py py-mod docutils literal notranslate"><span class="pre">calc</span></code></a> module (lower level than
<a class="reference internal" href="#hkl.diffract.Diffractometer" title="hkl.diffract.Diffractometer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Diffractometer</span></code></a>), the units for <em>energy</em> and
<em>wavelength</em> are <code class="docutils literal notranslate"><span class="pre">keV</span></code> and <code class="docutils literal notranslate"><span class="pre">angstrom</span></code>, respectively.  These
engineering units are not changeable by the user since the <strong>libhkl</strong> code
requires a consistent set of units (it does not anticipate the need to
do a units conversion).</p>
<p>The Python <em>pint</em> package <a class="footnote-reference brackets" href="#id7" id="id5">3</a> is used to apply any unit conversion.</p>
<p>This table summarizes the units for the energy and wavelength terms
for all diffractometer geometries.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 32%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>diffractometer attribute</p></th>
<th class="head"><p>engineering units</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">.energy</span></code></p></td>
<td><p>set by value of <code class="docutils literal notranslate"><span class="pre">.energy_units</span></code> Signal</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">.calc.energy</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">keV</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">.wavelength</span></code></p></td>
<td><p>does not exist in <a class="reference internal" href="#hkl.diffract.Diffractometer" title="hkl.diffract.Diffractometer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Diffractometer</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">.calc.wavelength</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">angstrom</span></code></p></td>
</tr>
</tbody>
</table>
<dl class="footnote brackets">
<dt class="label" id="id6"><span class="brackets"><a class="fn-backref" href="#id4">2</a></span></dt>
<dd><p><em>ophyd</em> <cite>PseudoPositioner</cite> Device:
<a class="reference external" href="https://blueskyproject.io/ophyd/positioners.html#pseudopositioner">https://blueskyproject.io/ophyd/positioners.html#pseudopositioner</a></p>
</dd>
<dt class="label" id="id7"><span class="brackets"><a class="fn-backref" href="#id5">3</a></span></dt>
<dd><p><em>pint</em> (for engineering units conversion):
<a class="reference external" href="https://pint.readthedocs.io">https://pint.readthedocs.io</a></p>
</dd>
</dl>
</section>
<section id="control-system-energy">
<span id="diffract-energy-control-system"></span><h2>Control System Energy<a class="headerlink" href="#control-system-energy" title="Permalink to this heading">Â¶</a></h2>
<p>One way to connect the control system energy is to replace the <code class="docutils literal notranslate"><span class="pre">energy</span></code>
attribute in the custom subclass of <a class="reference internal" href="#hkl.diffract.Diffractometer" title="hkl.diffract.Diffractometer"><code class="xref py py-class docutils literal notranslate"><span class="pre">hkl.diffract.Diffractometer()</span></code></a>,
connecting it as either <code class="docutils literal notranslate"><span class="pre">ophyd.EpicsSignal</span></code>, <code class="docutils literal notranslate"><span class="pre">ophyd.EpicsSignalRO</span></code>, or
<code class="docutils literal notranslate"><span class="pre">ophyd.EpicsSignalWithRBV</span></code>.  In the next example, the monochromator energy,
engineering units, and offset are provided by EPICS.  Also, another EPICS PV
controls whether the energy of the diffractometer object should be updated by
changes in the EPICS energy.  Note that the
<a class="reference internal" href="#hkl.diffract.Diffractometer._energy_changed" title="hkl.diffract.Diffractometer._energy_changed"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_energy_changed()</span></code></a> method is already
subscribed to updates in the <code class="docutils literal notranslate"><span class="pre">energy</span></code> signal.  It is not necessary to do this
in the custom subclass.  Donât forget to add the definitions for the real and
pseudo positioners.</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">Connecting control system energy to a 4-circle diffractometer.</span><a class="headerlink" href="#id9" title="Permalink to this code">Â¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span> <span class="kn">from</span> <span class="nn">hkl</span> <span class="kn">import</span> <span class="n">E4CV</span>
 <span class="kn">import</span> <span class="nn">logging</span>
 <span class="kn">from</span> <span class="nn">ophyd</span> <span class="kn">import</span> <span class="n">Component</span>
 <span class="kn">from</span> <span class="nn">ophyd</span> <span class="kn">import</span> <span class="n">EpicsMotor</span>
 <span class="kn">from</span> <span class="nn">ophyd</span> <span class="kn">import</span> <span class="n">EpicsSignal</span>
 <span class="kn">from</span> <span class="nn">ophyd</span> <span class="kn">import</span> <span class="n">PseudoSingle</span>

 <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

 <span class="k">class</span> <span class="nc">LocalDiffractometer</span><span class="p">(</span><span class="n">E4CV</span><span class="p">):</span>
     <span class="n">h</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="n">PseudoSingle</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;hinted&quot;</span><span class="p">)</span>
     <span class="n">k</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="n">PseudoSingle</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;hinted&quot;</span><span class="p">)</span>
     <span class="n">l</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="n">PseudoSingle</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;hinted&quot;</span><span class="p">)</span>

     <span class="n">omega</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="n">EpicsMotor</span><span class="p">,</span> <span class="s2">&quot;EPICS:m1&quot;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;hinted&quot;</span><span class="p">)</span>
     <span class="n">chi</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="n">EpicsMotor</span><span class="p">,</span> <span class="s2">&quot;EPICS:m2&quot;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;hinted&quot;</span><span class="p">)</span>
     <span class="n">phi</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="n">EpicsMotor</span><span class="p">,</span> <span class="s2">&quot;EPICS:m3&quot;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;hinted&quot;</span><span class="p">)</span>
     <span class="n">tth</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="n">EpicsMotor</span><span class="p">,</span> <span class="s2">&quot;EPICS:m4&quot;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;hinted&quot;</span><span class="p">)</span>

     <span class="n">energy</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="n">EpicsSignal</span><span class="p">,</span> <span class="s2">&quot;EPICS:energy&quot;</span><span class="p">)</span>
     <span class="n">energy_units</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="n">EpicsSignal</span><span class="p">,</span> <span class="s2">&quot;EPICS:energy.EGU&quot;</span><span class="p">)</span>
     <span class="n">energy_offset</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="n">EpicsSignal</span><span class="p">,</span> <span class="s2">&quot;EPICS:energy:offset&quot;</span><span class="p">)</span>
     <span class="n">energy_update_calc_flag</span> <span class="o">=</span> <span class="n">Component</span><span class="p">(</span><span class="n">EpicsSignal</span><span class="p">,</span> <span class="s2">&quot;EPICS:energy:lock&quot;</span><span class="p">)</span>

 <span class="n">fourc</span> <span class="o">=</span> <span class="n">LocalDiffractometer</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;fourc&quot;</span><span class="p">)</span>
 <span class="n">fourc</span><span class="o">.</span><span class="n">wait_for_connection</span><span class="p">()</span>
 <span class="n">fourc</span><span class="o">.</span><span class="n">_energy_changed</span><span class="p">()</span>  <span class="c1"># force the callback to update</span>
</pre></div>
</div>
</div>
</section>
<hr class="docutils" />
<section id="module-hkl.diffract">
<span id="source-code-documentation"></span><h2>Source code documentation<a class="headerlink" href="#module-hkl.diffract" title="Permalink to this heading">Â¶</a></h2>
<section id="id8">
<h3>diffract<a class="headerlink" href="#id8" title="Permalink to this heading">Â¶</a></h3>
<p>Common Support for diffractometers</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#hkl.diffract.Diffractometer" title="hkl.diffract.Diffractometer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Diffractometer</span></code></a>(prefix[,Â calc_kw,Â ...])</p></td>
<td><p>Diffractometer pseudopositioner</p></td>
</tr>
</tbody>
</table>
</section>
<dl class="py class">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">hkl.diffract.</span></span><span class="sig-name descname"><span class="pre">Diffractometer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calc_kw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decision_fcn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calc_inst</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'hkl'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configuration_attrs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_attrs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hkl/diffract.html#Diffractometer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hkl.diffract.Diffractometer" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Diffractometer pseudopositioner</p>
<table class="autosummary longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#hkl.diffract.Diffractometer.calc" title="hkl.diffract.Diffractometer.calc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calc</span></code></a></p></td>
<td><p>The calculation instance</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#hkl.diffract.Diffractometer.engine" title="hkl.diffract.Diffractometer.engine"><code class="xref py py-obj docutils literal notranslate"><span class="pre">engine</span></code></a></p></td>
<td><p>The calculation engine associated with the diffractometer</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#hkl.diffract.Diffractometer.forward" title="hkl.diffract.Diffractometer.forward"><code class="xref py py-obj docutils literal notranslate"><span class="pre">forward</span></code></a>(pseudo)</p></td>
<td><p>Calculate the real positions given the pseudo positions (hkl -&gt; angles).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#hkl.diffract.Diffractometer.inverse" title="hkl.diffract.Diffractometer.inverse"><code class="xref py py-obj docutils literal notranslate"><span class="pre">inverse</span></code></a>(real)</p></td>
<td><p>Calculate the pseudo positions given the real positions (angles -&gt; hkl).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#hkl.diffract.Diffractometer.forward_solutions_table" title="hkl.diffract.Diffractometer.forward_solutions_table"><code class="xref py py-obj docutils literal notranslate"><span class="pre">forward_solutions_table</span></code></a>(reflections[,Â full,Â ...])</p></td>
<td><p>Return table of computed solutions for each supplied (hkl) reflection.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#hkl.diffract.Diffractometer.apply_constraints" title="hkl.diffract.Diffractometer.apply_constraints"><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply_constraints</span></code></a>(constraints)</p></td>
<td><p>Constrain the solutions of the diffractometer's forward() computation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#hkl.diffract.Diffractometer.reset_constraints" title="hkl.diffract.Diffractometer.reset_constraints"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset_constraints</span></code></a>()</p></td>
<td><p>Set constraints back to initial settings.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#hkl.diffract.Diffractometer.show_constraints" title="hkl.diffract.Diffractometer.show_constraints"><code class="xref py py-obj docutils literal notranslate"><span class="pre">show_constraints</span></code></a>([fmt,Â printing])</p></td>
<td><p>Print the current constraints in a table.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#hkl.diffract.Diffractometer.undo_last_constraints" title="hkl.diffract.Diffractometer.undo_last_constraints"><code class="xref py py-obj docutils literal notranslate"><span class="pre">undo_last_constraints</span></code></a>()</p></td>
<td><p>Remove the current constraints additions, restore previous.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#hkl.diffract.Diffractometer.pa" title="hkl.diffract.Diffractometer.pa"><code class="xref py py-obj docutils literal notranslate"><span class="pre">pa</span></code></a>([all_samples,Â printing])</p></td>
<td><p>Report (all) the diffractometer settings.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#hkl.diffract.Diffractometer.wh" title="hkl.diffract.Diffractometer.wh"><code class="xref py py-obj docutils literal notranslate"><span class="pre">wh</span></code></a>([printing])</p></td>
<td><p>Report (brief) where is the diffractometer.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#hkl.diffract.Diffractometer._calc_energy_update_permitted" title="hkl.diffract.Diffractometer._calc_energy_update_permitted"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_calc_energy_update_permitted</span></code></a></p></td>
<td><p>return boolean <cite>True</cite> if permitted</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#hkl.diffract.Diffractometer._constraints_dict" title="hkl.diffract.Diffractometer._constraints_dict"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_constraints_dict</span></code></a></p></td>
<td><p>Return the constraints.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#hkl.diffract.Diffractometer._constraints_for_databroker" title="hkl.diffract.Diffractometer._constraints_for_databroker"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_constraints_for_databroker</span></code></a></p></td>
<td><p>Return the constraints for databroker.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#hkl.diffract.Diffractometer._energy_changed" title="hkl.diffract.Diffractometer._energy_changed"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_energy_changed</span></code></a>([value])</p></td>
<td><p>Callback indicating that the energy signal was updated</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#hkl.diffract.Diffractometer._energy_offset_changed" title="hkl.diffract.Diffractometer._energy_offset_changed"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_energy_offset_changed</span></code></a>([value])</p></td>
<td><p>Callback indicating that the energy offset signal was updated.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#hkl.diffract.Diffractometer._energy_units_changed" title="hkl.diffract.Diffractometer._energy_units_changed"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_energy_units_changed</span></code></a>([value])</p></td>
<td><p>Callback indicating that the energy units signal was updated.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#hkl.diffract.Diffractometer._push_current_constraints" title="hkl.diffract.Diffractometer._push_current_constraints"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_push_current_constraints</span></code></a>()</p></td>
<td><p>push current constraints onto the stack</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#hkl.diffract.Diffractometer._set_constraints" title="hkl.diffract.Diffractometer._set_constraints"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_set_constraints</span></code></a>(constraints)</p></td>
<td><p>set diffractometer's constraints</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#hkl.diffract.Diffractometer._update_calc_energy" title="hkl.diffract.Diffractometer._update_calc_energy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">_update_calc_energy</span></code></a>([value])</p></td>
<td><p>writes <code class="docutils literal notranslate"><span class="pre">self.calc.energy</span></code> from <code class="docutils literal notranslate"><span class="pre">value</span></code> or <code class="docutils literal notranslate"><span class="pre">self.energy</span></code>.</p></td>
</tr>
</tbody>
</table>
<p>This has a corresponding calculation engine from <strong>hklpy</strong> that does
forward and inverse calculations.</p>
<p>If instantiating a specific diffractometer class such as <cite>E4C</cite>, <cite>E6C</cite>,
neither the <cite>calc_inst</cite> or the <cite>calc_kw</cite> parameters are required.</p>
<p>However, there is the option to either pass in a calculation
instance (with <cite>calc_inst</cite>) or keywords for the default calculation
class (using <cite>calc_kw</cite>) to instantiate a new one.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prefix</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a>) â PV prefix for all components</p></li>
<li><p><strong>calc_kw</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)"><em>dict</em></a><em>, </em><em>optional</em>) â Initializer arguments for the calc class</p></li>
<li><p><strong>decision_fcn</strong> (<em>callable</em><em>, </em><em>optional</em>) â The decision function to use when multiple solutions exist for a given
forward calculation. Defaults to arbitrarily picking the first
solution.</p></li>
<li><p><strong>engine</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em>, </em><em>optional</em>) â Calculation engine name.  Default: <code class="docutils literal notranslate"><span class="pre">hkl</span></code></p></li>
<li><p><strong>read_attrs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><em>list</em></a><em>, </em><em>optional</em>) â Read attributes default to all pseudo and real positioners</p></li>
<li><p><strong>configuration_attrs</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><em>list</em></a><em>, </em><em>optional</em>) â Defaults to the UB matrix and energy</p></li>
<li><p><strong>parent</strong> (<em>Device</em><em>, </em><em>optional</em>) â Parent device</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em>, </em><em>optional</em>) â Device name</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer.calc_class">
<span class="sig-name descname"><span class="pre">calc_class</span></span><a class="headerlink" href="#hkl.diffract.Diffractometer.calc_class" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Reciprocal calculation class used with this diffractometer. If <code class="docutils literal notranslate"><span class="pre">None</span></code>
(as used in <cite>hkl.diffract.Diffractometer</cite>), <cite>calc_inst</cite> must be
specified upon initialization.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>sub-class of <a class="reference internal" href="calc.html#hkl.calc.CalcRecip" title="hkl.calc.CalcRecip">CalcRecip</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer.max_forward_iterations">
<span class="sig-name descname"><span class="pre">max_forward_iterations</span></span><a class="headerlink" href="#hkl.diffract.Diffractometer.max_forward_iterations" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Maximum allowed number of iterations in the <code class="docutils literal notranslate"><span class="pre">forward()</span></code>
method before failing to find a forward() solution.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">ophyd.Signal</span></code> (default value: 100)</p>
</dd>
</dl>
</dd></dl>

<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="geometries.html#hkl.geometries.E4CH" title="hkl.geometries.E4CH"><code class="xref py py-class docutils literal notranslate"><span class="pre">E4CH</span></code></a>, <a class="reference internal" href="geometries.html#hkl.geometries.E4CV" title="hkl.geometries.E4CV"><code class="xref py py-class docutils literal notranslate"><span class="pre">E4CV</span></code></a>, <a class="reference internal" href="geometries.html#hkl.geometries.E6C" title="hkl.geometries.E6C"><code class="xref py py-class docutils literal notranslate"><span class="pre">E6C</span></code></a>, <a class="reference internal" href="geometries.html#hkl.geometries.K4CV" title="hkl.geometries.K4CV"><code class="xref py py-class docutils literal notranslate"><span class="pre">K4CV</span></code></a>, <a class="reference internal" href="geometries.html#hkl.geometries.K6C" title="hkl.geometries.K6C"><code class="xref py py-class docutils literal notranslate"><span class="pre">K6C</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">Med2p3</span></code>, <a class="reference internal" href="geometries.html#hkl.geometries.Petra3_p09_eh2" title="hkl.geometries.Petra3_p09_eh2"><code class="xref py py-class docutils literal notranslate"><span class="pre">Petra3_p09_eh2</span></code></a>, <a class="reference internal" href="geometries.html#hkl.geometries.Petra3_p23_4c" title="hkl.geometries.Petra3_p23_4c"><code class="xref py py-class docutils literal notranslate"><span class="pre">Petra3_p23_4c</span></code></a>, <a class="reference internal" href="geometries.html#hkl.geometries.Petra3_p23_6c" title="hkl.geometries.Petra3_p23_6c"><code class="xref py py-class docutils literal notranslate"><span class="pre">Petra3_p23_6c</span></code></a>, <a class="reference internal" href="geometries.html#hkl.geometries.SoleilMars" title="hkl.geometries.SoleilMars"><code class="xref py py-class docutils literal notranslate"><span class="pre">SoleilMars</span></code></a>, <a class="reference internal" href="geometries.html#hkl.geometries.SoleilNanoscopiumRobot" title="hkl.geometries.SoleilNanoscopiumRobot"><code class="xref py py-class docutils literal notranslate"><span class="pre">SoleilNanoscopiumRobot</span></code></a>, <a class="reference internal" href="geometries.html#hkl.geometries.SoleilSiriusKappa" title="hkl.geometries.SoleilSiriusKappa"><code class="xref py py-class docutils literal notranslate"><span class="pre">SoleilSiriusKappa</span></code></a>, <a class="reference internal" href="geometries.html#hkl.geometries.SoleilSiriusTurret" title="hkl.geometries.SoleilSiriusTurret"><code class="xref py py-class docutils literal notranslate"><span class="pre">SoleilSiriusTurret</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SoleilSixs</span></code>, <a class="reference internal" href="geometries.html#hkl.geometries.SoleilSixsMed1p2" title="hkl.geometries.SoleilSixsMed1p2"><code class="xref py py-class docutils literal notranslate"><span class="pre">SoleilSixsMed1p2</span></code></a>, <a class="reference internal" href="geometries.html#hkl.geometries.SoleilSixsMed2p2" title="hkl.geometries.SoleilSixsMed2p2"><code class="xref py py-class docutils literal notranslate"><span class="pre">SoleilSixsMed2p2</span></code></a>, <a class="reference internal" href="geometries.html#hkl.geometries.SoleilSixsMed2p3" title="hkl.geometries.SoleilSixsMed2p3"><code class="xref py py-class docutils literal notranslate"><span class="pre">SoleilSixsMed2p3</span></code></a>, <a class="reference internal" href="geometries.html#hkl.geometries.SoleilSixsMed2p3v2" title="hkl.geometries.SoleilSixsMed2p3v2"><code class="xref py py-class docutils literal notranslate"><span class="pre">SoleilSixsMed2p3v2</span></code></a>, <a class="reference internal" href="geometries.html#hkl.geometries.Zaxis" title="hkl.geometries.Zaxis"><code class="xref py py-class docutils literal notranslate"><span class="pre">Zaxis</span></code></a></p>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prefix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calc_kw</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">decision_fcn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calc_inst</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'hkl'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">configuration_attrs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_attrs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hkl/diffract.html#Diffractometer.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hkl.diffract.Diffractometer.__init__" title="Permalink to this definition">Â¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer._calc_energy_update_permitted">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_calc_energy_update_permitted</span></span><a class="headerlink" href="#hkl.diffract.Diffractometer._calc_energy_update_permitted" title="Permalink to this definition">Â¶</a></dt>
<dd><p>return boolean <cite>True</cite> if permitted</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer._constraints_dict">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_constraints_dict</span></span><a class="headerlink" href="#hkl.diffract.Diffractometer._constraints_dict" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return the constraints.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer._constraints_for_databroker">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_constraints_for_databroker</span></span><a class="headerlink" href="#hkl.diffract.Diffractometer._constraints_for_databroker" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return the constraints for databroker.</p>
<p>Cannot write a dictionary from bluesky because all values must
be of the same data type, chosen from the first item in the
list. Just write the values (the boolean will be written as a
float.) The constraints will be written in the order of the real
positioners.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer._energy_changed">
<span class="sig-name descname"><span class="pre">_energy_changed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hkl/diffract.html#Diffractometer._energy_changed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hkl.diffract.Diffractometer._energy_changed" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Callback indicating that the energy signal was updated</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <cite>energy</cite> signal is subscribed to this method
in the <a class="reference internal" href="#hkl.diffract.Diffractometer.__init__" title="hkl.diffract.Diffractometer.__init__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Diffractometer.__init__()</span></code></a> method.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer._energy_offset_changed">
<span class="sig-name descname"><span class="pre">_energy_offset_changed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hkl/diffract.html#Diffractometer._energy_offset_changed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hkl.diffract.Diffractometer._energy_offset_changed" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Callback indicating that the energy offset signal was updated.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">energy_offset</span></code> signal is subscribed to this method
in the <a class="reference internal" href="#hkl.diffract.Diffractometer.__init__" title="hkl.diffract.Diffractometer.__init__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Diffractometer.__init__()</span></code></a> method.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer._energy_units_changed">
<span class="sig-name descname"><span class="pre">_energy_units_changed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hkl/diffract.html#Diffractometer._energy_units_changed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hkl.diffract.Diffractometer._energy_units_changed" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Callback indicating that the energy units signal was updated.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">energy_units</span></code> signal is subscribed to this method
in the <a class="reference internal" href="#hkl.diffract.Diffractometer.__init__" title="hkl.diffract.Diffractometer.__init__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Diffractometer.__init__()</span></code></a> method.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer._push_current_constraints">
<span class="sig-name descname"><span class="pre">_push_current_constraints</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/hkl/diffract.html#Diffractometer._push_current_constraints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hkl.diffract.Diffractometer._push_current_constraints" title="Permalink to this definition">Â¶</a></dt>
<dd><p>push current constraints onto the stack</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer._set_constraints">
<span class="sig-name descname"><span class="pre">_set_constraints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraints</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hkl/diffract.html#Diffractometer._set_constraints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hkl.diffract.Diffractometer._set_constraints" title="Permalink to this definition">Â¶</a></dt>
<dd><p>set diffractometerâs constraints</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer._update_calc_energy">
<span class="sig-name descname"><span class="pre">_update_calc_energy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hkl/diffract.html#Diffractometer._update_calc_energy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hkl.diffract.Diffractometer._update_calc_energy" title="Permalink to this definition">Â¶</a></dt>
<dd><p>writes <code class="docutils literal notranslate"><span class="pre">self.calc.energy</span></code> from <code class="docutils literal notranslate"><span class="pre">value</span></code> or <code class="docutils literal notranslate"><span class="pre">self.energy</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer.apply_constraints">
<span class="sig-name descname"><span class="pre">apply_constraints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">constraints</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hkl/diffract.html#Diffractometer.apply_constraints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hkl.diffract.Diffractometer.apply_constraints" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Constrain the solutions of the diffractometerâs forward() computation.</p>
<p>This action will first save the current constraints onto
a stack, enabling both <em>undo</em> and <em>reset</em> features.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer.calc">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">calc</span></span><a class="headerlink" href="#hkl.diffract.Diffractometer.calc" title="Permalink to this definition">Â¶</a></dt>
<dd><p>The calculation instance</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer.check_value">
<span class="sig-name descname"><span class="pre">check_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pos</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hkl/diffract.html#Diffractometer.check_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hkl.diffract.Diffractometer.check_value" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Raise exception if pos is not within limits.</p>
<p>In a scan, a subset of the pseudo axes may be directed,
which are given in a dict from a set message from the
bluesky RunEngine.</p>
<p>It is not permitted to scan both pseudo and real positioners.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer.engine">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">engine</span></span><a class="headerlink" href="#hkl.diffract.Diffractometer.engine" title="Permalink to this definition">Â¶</a></dt>
<dd><p>The calculation engine associated with the diffractometer</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer.forward">
<span class="sig-name descname"><span class="pre">forward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pseudo</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hkl/diffract.html#Diffractometer.forward"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hkl.diffract.Diffractometer.forward" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Calculate the real positions given the pseudo positions (hkl -&gt; angles).</p>
<p>Return the default solution using the <code class="docutils literal notranslate"><span class="pre">_decision_fcn()</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer.forward_solutions_table">
<span class="sig-name descname"><span class="pre">forward_solutions_table</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reflections</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">digits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hkl/diffract.html#Diffractometer.forward_solutions_table"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hkl.diffract.Diffractometer.forward_solutions_table" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Return table of computed solutions for each supplied (hkl) reflection.</p>
<p>The solutions are calculated using the current UB matrix &amp; constraints.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reflections</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.12)"><em>list</em></a><em> of </em><em>(</em><em>h</em><em>, </em><em>k</em><em>, </em><em>l</em><em>) </em><em>reflections</em>) â Each reflection is a tuple of 3 numbers,
(h, k, l) of the reflection.</p></li>
<li><p><strong>full</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>) â If <code class="docutils literal notranslate"><span class="pre">True</span></code>, show all solutions.  If <code class="docutils literal notranslate"><span class="pre">False</span></code>,
only show the default solution.</p></li>
<li><p><strong>digits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) â Number of digits to roundoff each position
value.  Default is 5.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer.inverse">
<span class="sig-name descname"><span class="pre">inverse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">real</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hkl/diffract.html#Diffractometer.inverse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hkl.diffract.Diffractometer.inverse" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Calculate the pseudo positions given the real positions (angles -&gt; hkl).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer.pa">
<span class="sig-name descname"><span class="pre">pa</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">all_samples</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">printing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hkl/diffract.html#Diffractometer.pa"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hkl.diffract.Diffractometer.pa" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Report (all) the diffractometer settings.</p>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">hkl</span> <span class="kn">import</span> <span class="n">SimulatedK4CV</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">k4cv</span> <span class="o">=</span> <span class="n">SimulatedK4CV</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;k4cv&#39;</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">k4cv</span><span class="o">.</span><span class="n">pa</span><span class="p">()</span>  <span class="c1"># FIXME lines are too long to include in source code</span>
<span class="o">=====================</span> <span class="o">====================================================================</span>
<span class="n">term</span>                  <span class="n">value</span>
<span class="o">=====================</span> <span class="o">====================================================================</span>
<span class="n">diffractometer</span>        <span class="n">k4cv</span>
<span class="n">geometry</span>              <span class="n">K4CV</span>
<span class="k">class</span>                 <span class="nc">SimulatedK4CV</span>
<span class="n">energy</span> <span class="p">(</span><span class="n">keV</span><span class="p">)</span>          <span class="mf">8.05092</span>
<span class="n">wavelength</span> <span class="p">(</span><span class="n">angstrom</span><span class="p">)</span> <span class="mf">1.54000</span>
<span class="n">calc</span> <span class="n">engine</span>           <span class="n">hkl</span>
<span class="n">mode</span>                  <span class="n">bissector</span>
<span class="n">positions</span>             <span class="o">======</span> <span class="o">=======</span>
                    <span class="n">name</span>   <span class="n">value</span>
                    <span class="o">======</span> <span class="o">=======</span>
                    <span class="n">komega</span> <span class="mf">0.00000</span>
                    <span class="n">kappa</span>  <span class="mf">0.00000</span>
                    <span class="n">kphi</span>   <span class="mf">0.00000</span>
                    <span class="n">tth</span>    <span class="mf">0.00000</span>
                    <span class="o">======</span> <span class="o">=======</span>
<span class="n">sample</span><span class="p">:</span> <span class="n">main</span>          <span class="o">================</span> <span class="o">===================================================</span>
                    <span class="n">term</span>             <span class="n">value</span>
                    <span class="o">================</span> <span class="o">===================================================</span>
                    <span class="n">unit</span> <span class="n">cell</span> <span class="n">edges</span>  <span class="n">a</span><span class="o">=</span><span class="mf">1.54</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mf">1.54</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mf">1.54</span>
                    <span class="n">unit</span> <span class="n">cell</span> <span class="n">angles</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">90.0</span><span class="p">,</span> <span class="n">beta</span><span class="o">=</span><span class="mf">90.0</span><span class="p">,</span> <span class="n">gamma</span><span class="o">=</span><span class="mf">90.0</span>
                    <span class="p">[</span><span class="n">U</span><span class="p">]</span>              <span class="p">[[</span><span class="mf">1.</span> <span class="mf">0.</span> <span class="mf">0.</span><span class="p">]</span>
                                        <span class="p">[</span><span class="mf">0.</span> <span class="mf">1.</span> <span class="mf">0.</span><span class="p">]</span>
                                        <span class="p">[</span><span class="mf">0.</span> <span class="mf">0.</span> <span class="mf">1.</span><span class="p">]]</span>
                    <span class="p">[</span><span class="n">UB</span><span class="p">]</span>             <span class="p">[[</span> <span class="mf">4.07999046e+00</span> <span class="o">-</span><span class="mf">2.49827363e-16</span> <span class="o">-</span><span class="mf">2.49827363e-16</span><span class="p">]</span>
                                        <span class="p">[</span> <span class="mf">0.00000000e+00</span>  <span class="mf">4.07999046e+00</span> <span class="o">-</span><span class="mf">2.49827363e-16</span><span class="p">]</span>
                                        <span class="p">[</span> <span class="mf">0.00000000e+00</span>  <span class="mf">0.00000000e+00</span>  <span class="mf">4.07999046e+00</span><span class="p">]]</span>
                    <span class="o">================</span> <span class="o">===================================================</span>
<span class="o">=====================</span> <span class="o">====================================================================</span>

<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="o">&lt;</span><span class="n">pyRestTable</span><span class="o">.</span><span class="n">rest_table</span><span class="o">.</span><span class="n">Table</span> <span class="n">at</span> <span class="mh">0x7f5c16503e20</span><span class="o">&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer.reset_constraints">
<span class="sig-name descname"><span class="pre">reset_constraints</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/hkl/diffract.html#Diffractometer.reset_constraints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hkl.diffract.Diffractometer.reset_constraints" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Set constraints back to initial settings.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer.show_constraints">
<span class="sig-name descname"><span class="pre">show_constraints</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">fmt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'simple'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">printing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hkl/diffract.html#Diffractometer.show_constraints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hkl.diffract.Diffractometer.show_constraints" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Print the current constraints in a table.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer.undo_last_constraints">
<span class="sig-name descname"><span class="pre">undo_last_constraints</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/hkl/diffract.html#Diffractometer.undo_last_constraints"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hkl.diffract.Diffractometer.undo_last_constraints" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Remove the current constraints additions, restore previous.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="hkl.diffract.Diffractometer.wh">
<span class="sig-name descname"><span class="pre">wh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">printing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/hkl/diffract.html#Diffractometer.wh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#hkl.diffract.Diffractometer.wh" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Report (brief) where is the diffractometer.</p>
<p>EXAMPLE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">In</span> <span class="p">[</span><span class="mi">1</span><span class="p">]:</span> <span class="kn">from</span> <span class="nn">hkl</span> <span class="kn">import</span> <span class="n">SimulatedK4CV</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">2</span><span class="p">]:</span> <span class="n">k4cv</span> <span class="o">=</span> <span class="n">SimulatedK4CV</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;k4cv&#39;</span><span class="p">)</span>

<span class="n">In</span> <span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="n">k4cv</span><span class="o">.</span><span class="n">wh</span><span class="p">()</span>
<span class="o">=====================</span> <span class="o">=========</span> <span class="o">=========</span>
<span class="n">term</span>                  <span class="n">value</span>     <span class="n">axis_type</span>
<span class="o">=====================</span> <span class="o">=========</span> <span class="o">=========</span>
<span class="n">diffractometer</span>        <span class="n">k4cv</span>
<span class="n">sample</span> <span class="n">name</span>           <span class="n">main</span>
<span class="n">energy</span> <span class="p">(</span><span class="n">keV</span><span class="p">)</span>          <span class="mf">8.05092</span>
<span class="n">wavelength</span> <span class="p">(</span><span class="n">angstrom</span><span class="p">)</span> <span class="mf">1.54000</span>
<span class="n">calc</span> <span class="n">engine</span>           <span class="n">hkl</span>
<span class="n">mode</span>                  <span class="n">bissector</span>
<span class="n">h</span>                     <span class="mf">0.0</span>       <span class="n">pseudo</span>
<span class="n">k</span>                     <span class="mf">0.0</span>       <span class="n">pseudo</span>
<span class="n">l</span>                     <span class="mf">0.0</span>       <span class="n">pseudo</span>
<span class="n">komega</span>                <span class="mi">0</span>         <span class="n">real</span>
<span class="n">kappa</span>                 <span class="mi">0</span>         <span class="n">real</span>
<span class="n">kphi</span>                  <span class="mi">0</span>         <span class="n">real</span>
<span class="n">tth</span>                   <span class="mi">0</span>         <span class="n">real</span>
<span class="o">=====================</span> <span class="o">=========</span> <span class="o">=========</span>

<span class="n">Out</span><span class="p">[</span><span class="mi">3</span><span class="p">]:</span> <span class="o">&lt;</span><span class="n">pyRestTable</span><span class="o">.</span><span class="n">rest_table</span><span class="o">.</span><span class="n">Table</span> <span class="n">at</span> <span class="mh">0x7f55c4775cd0</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>compare with similar function in SPEC:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mf">1117.</span><span class="n">KAPPA</span><span class="o">&gt;</span> <span class="n">wh</span>
<span class="n">H</span> <span class="n">K</span> <span class="n">L</span> <span class="o">=</span>  <span class="mi">0</span>  <span class="mi">0</span>  <span class="mf">1.7345</span>
<span class="n">Alpha</span> <span class="o">=</span> <span class="mi">20</span>  <span class="n">Beta</span> <span class="o">=</span> <span class="mi">20</span>  <span class="n">Azimuth</span> <span class="o">=</span> <span class="mi">90</span>
<span class="n">Omega</span> <span class="o">=</span> <span class="mf">32.952</span>  <span class="n">Lambda</span> <span class="o">=</span> <span class="mf">1.54</span>
<span class="n">Two</span> <span class="n">Theta</span>       <span class="n">Theta</span>         <span class="n">Chi</span>         <span class="n">Phi</span>     <span class="n">K_Theta</span>       <span class="n">Kappa</span>       <span class="n">K_Phi</span>
<span class="mf">40.000000</span>   <span class="mf">20.000000</span>   <span class="mf">90.000000</span>   <span class="mf">57.048500</span>   <span class="mf">77.044988</span>  <span class="mf">134.755995</span>  <span class="mf">114.093455</span>
</pre></div>
</div>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="context.html" class="btn btn-neutral float-left" title="context" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="engine.html" class="btn btn-neutral float-right" title="engine" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2014-2021, Brookhaven National Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>