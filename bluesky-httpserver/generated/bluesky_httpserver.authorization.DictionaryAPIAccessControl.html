<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>bluesky_httpserver.authorization.DictionaryAPIAccessControl &mdash; Bluesky HTTP Server 0.0.9 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/plot_directive.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="bluesky_httpserver.authorization.ServerBasedAPIAccessControl" href="bluesky_httpserver.authorization.ServerBasedAPIAccessControl.html" />
    <link rel="prev" title="bluesky_httpserver.authorization.BasicAPIAccessControl" href="bluesky_httpserver.authorization.BasicAPIAccessControl.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Bluesky HTTP Server
          </a>
              <div class="version">
                0.0.9
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-history.html">Release History</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User's Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Starting and Using the Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../control_re_manager.html">Controlling Run Engine Manager</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../configuration.html">Server Configuration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../configuration.html#configuration-using-environment-variables">Configuration Using Environment Variables</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../configuration.html#configuration-files">Configuration Files</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../configuration.html#communication-with-run-engine-manager">Communication With Run Engine Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration.html#custom-routers">Custom Routers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../configuration.html#authentication">Authentication</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../configuration.html#authorization-api-access">Authorization: API Access</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../configuration.html#basic-api-access-policy">Basic API Access Policy</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../configuration.html#dictionary-api-access-policy">Dictionary API Access Policy</a></li>
<li class="toctree-l4"><a class="reference internal" href="../configuration.html#access-policy-based-on-external-access-control-server">Access Policy Based on External Access Control Server</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../configuration.html#authorization-resource-access">Authorization: Resource Access</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Related Projects</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://blueskyproject.io/bluesky-queueserver">Bluesky Queue Server</a></li>
<li class="toctree-l1"><a class="reference external" href="https://blueskyproject.io/bluesky-queueserver-api">Bluesky Queue Server API</a></li>
<li class="toctree-l1"><a class="reference external" href="https://blueskyproject.io/bluesky-widgets">Bluesky Widgets</a></li>
<li class="toctree-l1"><a class="reference external" href="https://blueskyproject.io/bluesky">Bluesky</a></li>
<li class="toctree-l1"><a class="reference external" href="https://blueskyproject.io/ophyd">Ophyd</a></li>
<li class="toctree-l1"><a class="reference external" href="https://blueskyproject.io/databroker">Data Broker</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Bluesky HTTP Server</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../configuration.html">Server Configuration</a></li>
      <li class="breadcrumb-item active">bluesky_httpserver.authorization.DictionaryAPIAccessControl</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/generated/bluesky_httpserver.authorization.DictionaryAPIAccessControl.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="bluesky-httpserver-authorization-dictionaryapiaccesscontrol">
<h1>bluesky_httpserver.authorization.DictionaryAPIAccessControl<a class="headerlink" href="#bluesky-httpserver-authorization-dictionaryapiaccesscontrol" title="Permalink to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="bluesky_httpserver.authorization.DictionaryAPIAccessControl">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bluesky_httpserver.authorization.</span></span><span class="sig-name descname"><span class="pre">DictionaryAPIAccessControl</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">users</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bluesky_httpserver/authorization/api_access.html#DictionaryAPIAccessControl"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bluesky_httpserver.authorization.DictionaryAPIAccessControl" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary-based API access policy.
Simple extension of <code class="docutils literal notranslate"><span class="pre">BasicAPIAccessControl</span></code> that provides an option to provide user information,
including assigned roles, displayed name and email. The policy is primarily intended for use in demos
and testing. Production deployments are expected to use more secure authorization policies.</p>
<p>User information is passed using <code class="docutils literal notranslate"><span class="pre">users</span></code> parameter, which accepts a dictionary. If the parameter
is <code class="docutils literal notranslate"><span class="pre">None</span></code>, then no user information is passed to the policy and no users are allowed to access any API.
The dictionary maps usernames to user information dictionaries, containing roles, displayed names (optional)
and emails (optional). The policy arguments are specified as part of config YML files as illustrated
in the following examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># No users are allowed to access any API.</span>
<span class="n">api_access</span><span class="p">:</span>
  <span class="n">policy</span><span class="p">:</span> <span class="n">bluesky_httpserver</span><span class="o">.</span><span class="n">authorization</span><span class="p">:</span><span class="n">DictionaryAPIAccessControl</span>
  <span class="n">args</span><span class="p">:</span>
      <span class="n">users</span><span class="p">:</span> <span class="kc">None</span>

<span class="c1"># User &#39;bob&#39; is defined, but he is not allowed to use any API.</span>
<span class="n">api_access</span><span class="p">:</span>
  <span class="n">policy</span><span class="p">:</span> <span class="n">bluesky_httpserver</span><span class="o">.</span><span class="n">authorization</span><span class="p">:</span><span class="n">DictionaryAPIAccessControl</span>
  <span class="n">args</span><span class="p">:</span>
    <span class="n">users</span><span class="p">:</span>
      <span class="n">bob</span><span class="p">:</span> <span class="kc">None</span>

<span class="c1"># User &#39;bob&#39; is assigned to &#39;admin&#39; and &#39;expert&#39; groups, &#39;jdoe&#39; is assigned to the &#39;advanced&#39; group.</span>
<span class="c1"># Note: a single role may be represented as a list or a string.</span>
<span class="n">api_access</span><span class="p">:</span>
  <span class="n">policy</span><span class="p">:</span> <span class="n">bluesky_httpserver</span><span class="o">.</span><span class="n">authorization</span><span class="p">:</span><span class="n">DictionaryAPIAccessControl</span>
  <span class="n">args</span><span class="p">:</span>
    <span class="n">users</span><span class="p">:</span>
      <span class="n">bob</span><span class="p">:</span>
        <span class="n">roles</span><span class="p">:</span>
          <span class="o">-</span> <span class="n">admin</span>
          <span class="o">-</span> <span class="n">expert</span>
        <span class="n">email</span><span class="p">:</span> <span class="n">bob</span><span class="nd">@gmail</span><span class="o">.</span><span class="n">com</span>
      <span class="n">jdoe</span><span class="p">:</span>
        <span class="n">roles</span><span class="p">:</span> <span class="n">advanced</span>
        <span class="n">dislayed_name</span><span class="p">:</span> <span class="n">Doe</span><span class="p">,</span> <span class="n">John</span>
        <span class="n">email</span><span class="p">:</span> <span class="n">jdoe</span><span class="nd">@gmail</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
<p>The policy arguments may also include <code class="docutils literal notranslate"><span class="pre">roles</span></code> parameter, which is handled by <code class="docutils literal notranslate"><span class="pre">BasicAPIAccessControl</span></code>.
See docstring for <code class="docutils literal notranslate"><span class="pre">BasicAPIAccessControl</span></code> for more detailed information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>roles: dict or None</strong></dt><dd><p>The dictionary configuration parameters that modifies the default or create new roles. The parameter
is passed to <code class="docutils literal notranslate"><span class="pre">BasicAPIAccessControl</span></code>.</p>
</dd>
<dt><strong>users: dict or None</strong></dt><dd><p>The dictionary that maps user name to user information.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="bluesky_httpserver.authorization.DictionaryAPIAccessControl.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">users</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/bluesky_httpserver/authorization/api_access.html#DictionaryAPIAccessControl.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#bluesky_httpserver.authorization.DictionaryAPIAccessControl.__init__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#bluesky_httpserver.authorization.DictionaryAPIAccessControl.__init__" title="bluesky_httpserver.authorization.DictionaryAPIAccessControl.__init__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code></a>(*[, roles, users])</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_displayed_user_name</span></code>(username)</p></td>
<td><p>Returns the displayed user name for the user. The displayed user name is assembled from <code class="docutils literal notranslate"><span class="pre">username</span></code>, full 'displayed' user name and user's email. The formatting depends on the available data, i.e. if no additional data is available, then <code class="docutils literal notranslate"><span class="pre">username</span></code> is returned. If the user is not found, then <code class="docutils literal notranslate"><span class="pre">username</span></code> is returned. The following output is possible for the user <em>'jdoe'</em>::.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_user_info</span></code>(username)</p></td>
<td><p>Returns complete user information, including a set of roles, set of scopes and displayed user name.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_user_roles</span></code>(username)</p></td>
<td><p>Returns a set of roles assigned to the user.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_user_scopes</span></code>(username)</p></td>
<td><p>Returns a set of scopes assigned to the user.</p></td>
</tr>
<tr class="row-even"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">is_user_known</span></code>(username)</p></td>
<td><p>Performs quick check whether the user is known.</p></td>
</tr>
</tbody>
</table>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="bluesky_httpserver.authorization.BasicAPIAccessControl.html" class="btn btn-neutral float-left" title="bluesky_httpserver.authorization.BasicAPIAccessControl" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="bluesky_httpserver.authorization.ServerBasedAPIAccessControl.html" class="btn btn-neutral float-right" title="bluesky_httpserver.authorization.ServerBasedAPIAccessControl" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Brookhaven National Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>