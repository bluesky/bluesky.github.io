

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Run Engine Manager API &mdash; bluesky-queueserver 0.post1+ge052ce2 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="bluesky_queueserver.manager.comms.ZMQCommSendAsync" href="generated/bluesky_queueserver.manager.comms.ZMQCommSendAsync.html" />
    <link rel="prev" title="Usage" href="usage.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> bluesky-queueserver
          

          
          </a>

          
            
            
              <div class="version">
                0.post1+ge052ce2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">Usage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Run Engine Manager API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="generated/bluesky_queueserver.manager.comms.ZMQCommSendAsync.html">bluesky_queueserver.manager.comms.ZMQCommSendAsync</a></li>
<li class="toctree-l2"><a class="reference internal" href="generated/bluesky_queueserver.manager.comms.ZMQCommSendAsync.send_message.html">bluesky_queueserver.manager.comms.ZMQCommSendAsync.send_message</a></li>
<li class="toctree-l2"><a class="reference internal" href="generated/bluesky_queueserver.manager.comms.ZMQCommSendAsync.close.html">bluesky_queueserver.manager.comms.ZMQCommSendAsync.close</a></li>
<li class="toctree-l2"><a class="reference internal" href="generated/bluesky_queueserver.manager.comms.ZMQCommSendThreads.html">bluesky_queueserver.manager.comms.ZMQCommSendThreads</a></li>
<li class="toctree-l2"><a class="reference internal" href="generated/bluesky_queueserver.manager.comms.ZMQCommSendThreads.send_message.html">bluesky_queueserver.manager.comms.ZMQCommSendThreads.send_message</a></li>
<li class="toctree-l2"><a class="reference internal" href="generated/bluesky_queueserver.manager.comms.ZMQCommSendThreads.close.html">bluesky_queueserver.manager.comms.ZMQCommSendThreads.close</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="release-history.html">Release History</a></li>
<li class="toctree-l1"><a class="reference internal" href="min_versions.html">Minimum Version of Python and NumPy</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">bluesky-queueserver</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Run Engine Manager API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/re_manager_api.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="run-engine-manager-api">
<h1>Run Engine Manager API<a class="headerlink" href="#run-engine-manager-api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="asyncio-based-api-for-controlling-re-manager">
<h2>Asyncio-Based API for Controlling RE Manager<a class="headerlink" href="#asyncio-based-api-for-controlling-re-manager" title="Permalink to this headline">¶</a></h2>
<p>Asyncio-based API is designed for use in applications that employ <cite>asyncio</cite> event loop.
For example, HTTP server module is using asyncio-based API for communication with RE Manager.
Communication is performed by instantiating <cite>ZMQCommSendAsync</cite> class and awaiting
<cite>ZMQCommSendAsync.send_message()</cite> function, which accepts the method name and parameters
as arguments and returns the response message.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/bluesky_queueserver.manager.comms.ZMQCommSendAsync.html#bluesky_queueserver.manager.comms.ZMQCommSendAsync" title="bluesky_queueserver.manager.comms.ZMQCommSendAsync"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ZMQCommSendAsync</span></code></a></p></td>
<td><p>API for communication with RE Manager via ZMQ.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/bluesky_queueserver.manager.comms.ZMQCommSendAsync.send_message.html#bluesky_queueserver.manager.comms.ZMQCommSendAsync.send_message" title="bluesky_queueserver.manager.comms.ZMQCommSendAsync.send_message"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ZMQCommSendAsync.send_message</span></code></a></p></td>
<td><p>Send message to ZMQ server and wait for the response.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/bluesky_queueserver.manager.comms.ZMQCommSendAsync.close.html#bluesky_queueserver.manager.comms.ZMQCommSendAsync.close" title="bluesky_queueserver.manager.comms.ZMQCommSendAsync.close"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ZMQCommSendAsync.close</span></code></a></p></td>
<td><p>Close ZMQ socket.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="thread-based-api-for-controlling-re-manager">
<h2>Thread-Based API for Controlling RE Manager<a class="headerlink" href="#thread-based-api-for-controlling-re-manager" title="Permalink to this headline">¶</a></h2>
<p>Thread-based API is designed for use in applications that are not based on <cite>asyncio</cite> event loop,
such as PyQT applications or simple python scripts. Communication with RE Manager is performed
by instantiating <cite>ZMQCommSendThreads</cite> class and calling <cite>ZMQCommSendThreads.send_message()</cite>
function, which accepts the method name and parameters. The <cite>send_message()</cite> function may be
called in blocking and non-blocking mode. In blocking mode, the function returns the response
message. In non-blocking mode the function exits once ZMQ request is send to RE Manager and
passes the response message to user-defined callback function once the response is received.
The reference to the callback function is passed to <cite>send_message()</cite> function as one of the
arguments.</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/bluesky_queueserver.manager.comms.ZMQCommSendThreads.html#bluesky_queueserver.manager.comms.ZMQCommSendThreads" title="bluesky_queueserver.manager.comms.ZMQCommSendThreads"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ZMQCommSendThreads</span></code></a></p></td>
<td><p>Thread-based API for communication with RE Manager via ZMQ.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/bluesky_queueserver.manager.comms.ZMQCommSendThreads.send_message.html#bluesky_queueserver.manager.comms.ZMQCommSendThreads.send_message" title="bluesky_queueserver.manager.comms.ZMQCommSendThreads.send_message"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ZMQCommSendThreads.send_message</span></code></a></p></td>
<td><p>Send message to ZMQ server and wait for the response.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/bluesky_queueserver.manager.comms.ZMQCommSendThreads.close.html#bluesky_queueserver.manager.comms.ZMQCommSendThreads.close" title="bluesky_queueserver.manager.comms.ZMQCommSendThreads.close"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ZMQCommSendThreads.close</span></code></a></p></td>
<td><p>Close ZMQ socket.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="supported-methods-for-zmq-communication-api">
<h2>Supported Methods For ZMQ Communication API<a class="headerlink" href="#supported-methods-for-zmq-communication-api" title="Permalink to this headline">¶</a></h2>
<div class="section" id="brief-reference">
<h3>Brief Reference<a class="headerlink" href="#brief-reference" title="Permalink to this headline">¶</a></h3>
<p>The following reference describes the methods used for controlling RE Manager. For each
method, the documentation contains the description of outgoing and returned parameters.
Method name and the dictionary of method parameters are passed as arguments to
<cite>send_message()</cite> API function.</p>
<p>The result of the request processing is returned
as a dictionary of the returned parameters by <cite>send_message()</cite> function or passed as
an argument of the callback. In case of communication error, <cite>send_message</cite> function may
raise the exception (default) or return the error message. If reference to a callback function
is passed to <cite>send_message</cite> (in thread-based API), the communication error message will be
passed as <cite>msg_err</cite> parameter of the callback function</p>
<p>Get status information from RE Manager:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#method-ping"><span class="std std-ref">‘ping’</span></a></p></li>
<li><p><a class="reference internal" href="#method-status"><span class="std std-ref">‘status’</span></a></p></li>
</ul>
<p>Allowed plans and devices:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#method-plans-allowed"><span class="std std-ref">‘plans_allowed’</span></a></p></li>
<li><p><a class="reference internal" href="#method-devices-allowed"><span class="std std-ref">‘devices_allowed’</span></a></p></li>
<li><p><a class="reference internal" href="#method-permissions-reload"><span class="std std-ref">‘permissions_reload’</span></a></p></li>
</ul>
<p>History of executed plans:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#method-history-get"><span class="std std-ref">‘history_get’</span></a></p></li>
<li><p><a class="reference internal" href="#method-history-clear"><span class="std std-ref">‘history_clear’</span></a></p></li>
</ul>
<p>Open and close RE Worker environment:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#method-environment-open"><span class="std std-ref">‘environment_open’</span></a></p></li>
<li><p><a class="reference internal" href="#method-environment-close"><span class="std std-ref">‘environment_close’</span></a></p></li>
<li><p><a class="reference internal" href="#method-environment-destroy"><span class="std std-ref">‘environment_destroy’</span></a></p></li>
</ul>
<p>Operations with the plan queue:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#method-queue-mode-set"><span class="std std-ref">‘queue_mode_set’</span></a></p></li>
<li><p><a class="reference internal" href="#method-queue-get"><span class="std std-ref">‘queue_get’</span></a></p></li>
<li><p><a class="reference internal" href="#method-queue-item-add"><span class="std std-ref">‘queue_item_add’</span></a></p></li>
<li><p><a class="reference internal" href="#method-queue-item-add-batch"><span class="std std-ref">‘queue_item_add_batch’</span></a></p></li>
<li><p><a class="reference internal" href="#method-queue-item-update"><span class="std std-ref">‘queue_item_update’</span></a></p></li>
<li><p><a class="reference internal" href="#method-queue-item-get"><span class="std std-ref">‘queue_item_get’</span></a></p></li>
<li><p><a class="reference internal" href="#method-queue-item-remove"><span class="std std-ref">‘queue_item_remove’</span></a></p></li>
<li><p><a class="reference internal" href="#method-queue-item-move"><span class="std std-ref">‘queue_item_move’</span></a></p></li>
<li><p><a class="reference internal" href="#method-queue-clear"><span class="std std-ref">‘queue_clear’</span></a></p></li>
</ul>
<p>Start and stop execution of the plan queue:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#method-queue-start"><span class="std std-ref">‘queue_start’</span></a></p></li>
<li><p><a class="reference internal" href="#method-queue-stop"><span class="std std-ref">‘queue_stop’</span></a></p></li>
<li><p><a class="reference internal" href="#method-queue-stop-cancel"><span class="std std-ref">‘queue_stop_cancel’</span></a></p></li>
</ul>
<p>Send commands to Bluesky Run Engine:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#method-re-pause"><span class="std std-ref">‘re_pause’</span></a></p></li>
<li><p><a class="reference internal" href="#method-re-resume-stop-abort-halt"><span class="std std-ref">‘re_resume’, ‘re_stop’, ‘re_abort’, ‘re_halt’</span></a></p></li>
</ul>
<p>Monitor the list of active runs:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#method-re-runs"><span class="std std-ref">‘re_runs’</span></a></p></li>
</ul>
<p>Stopping RE Manager (mostly used in testing):</p>
<ul class="simple">
<li><p><a class="reference internal" href="#method-manager-stop"><span class="std std-ref">‘manager_stop’</span></a></p></li>
<li><p><a class="reference internal" href="#method-manager-kill"><span class="std std-ref">‘manager_kill’</span></a></p></li>
</ul>
</div>
<div class="section" id="detailed-reference">
<h3>Detailed Reference<a class="headerlink" href="#detailed-reference" title="Permalink to this headline">¶</a></h3>
<div class="section" id="ping">
<span id="method-ping"></span><h4><strong>‘ping’</strong><a class="headerlink" href="#ping" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘ping’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Causes RE Manager to send some predefined response. Currently ‘ping’ request is
equivalent to ‘status’ request. The functionality may be changed in the future.
Use ‘status’ method to request status information from RE Manager.</p>
<p><em>The request always succeeds</em>.</p>
</td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><p>See ‘status’ method for information on returned data.</p></td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>Immediate: no follow-up requests are required.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="status">
<span id="method-status"></span><h4><strong>‘status’</strong><a class="headerlink" href="#status" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘status’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Returns status of RE Manager.</p>
<p><em>The request always succeeds</em>.</p>
</td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>always returns ‘RE Manager’</p>
</dd>
<dt><strong>items_in_queue</strong>: <em>int</em></dt><dd><p>the number of items in the plan queue</p>
</dd>
<dt><strong>items_in_history</strong>: <em>int</em></dt><dd><p>the number of items in the plan history</p>
</dd>
<dt><strong>running_item_uid</strong>: <em>str</em> or <em>None</em></dt><dd><p>item UID of the currently running plan or <em>None</em> if no plan is currently running.</p>
</dd>
<dt><strong>plan_queue_uid</strong>: <em>str</em></dt><dd><p>plan queue UID, which is updated each time the contents of the queue is changed.
Monitor this parameter to determine when the queue data should be downloaded.</p>
</dd>
<dt><strong>plan_history_uid</strong>: <em>str</em></dt><dd><p>plan history UID, which is updated each time the contents of the history is changed.
Monitor this parameter to determine when the history data should be downloaded.</p>
</dd>
<dt><strong>manager_state</strong>: <em>str</em></dt><dd><p>state of RE Manager. Supported states:</p>
<ul class="simple">
<li><p><strong>‘initializing’</strong> - RE Manager is initializing (the RE Manager is starting
or restarting)</p></li>
<li><p><strong>‘idle’</strong> - RE Manager is idle and ready to execute requests. Many requests will fail
if RE Manager is not in the idle state.</p></li>
<li><p><strong>‘paused’</strong> - a plan was paused and Run Engine is in the paused state.
The plan needs to be resumed, stopped, halted or aborted.</p></li>
<li><p><strong>‘creating_environment’</strong> - RE Worker environment is in the process of being created.</p></li>
<li><p><strong>‘executing_queue’</strong> - queue is being executed.</p></li>
<li><p><strong>‘closing_environment’</strong> - RE Worker environment is in the process of being
closed (safe).</p></li>
<li><p><strong>‘destroying_environment’</strong> - RE Worker environment is in the process of being
destroyed (emergency).</p></li>
<li><p><strong>‘re_state’</strong> - state of Run Engine (see Bluesky documentation).</p></li>
<li><p><strong>‘run_list_uid’</strong> - UID of the list of the active runs. Monitor this UID and
load the updated list of active runs once the UID is changed.</p></li>
</ul>
</dd>
<dt><strong>re_state</strong>: <em>str</em> or <em>None</em></dt><dd><p>current state of Bluesky Run Engine (see Blue Sky documentation) or <em>None</em> if
RE Worker environment does not exist (or closed).</p>
</dd>
<dt><strong>plan_queue_mode</strong>: <em>dict</em></dt><dd><p>the dictionary of parameters that determine queue execution mode. The key/value pairs
in the dictionary represent parameter names and values. Supported parameters:
<em>‘loop’</em> (<em>boolean</em>) - indicates if the LOOP mode is enabled.</p>
</dd>
<dt><strong>queue_stop_pending</strong>: <em>boolean</em></dt><dd><p>indicates if the request to stop the queue after completion of the current plan is
pending.</p>
</dd>
<dt><strong>worker_environment_exists</strong>: <em>boolean</em></dt><dd><p>indicates if RE Worker environment was created and plans could be executed.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>Immediate: no follow-up requests are required.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="plans-allowed">
<span id="method-plans-allowed"></span><h4><strong>‘plans_allowed’</strong><a class="headerlink" href="#plans-allowed" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘plans_allowed’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Returns a dictionary that contains information on the allowed plans for a given user
group.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><dl class="simple">
<dt><strong>user_group</strong>: <em>str</em></dt><dd><p>the name of the user group (e.g. ‘admin’).</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
<dt><strong>plans_allowed</strong>: <em>dict</em></dt><dd><p>the dictionary that contains information on the allowed plans.
Dictionary keys are plan names.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>Immediate: no follow-up requests are required.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="devices-allowed">
<span id="method-devices-allowed"></span><h4><strong>‘devices_allowed’</strong><a class="headerlink" href="#devices-allowed" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘devices_allowed’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Returns a dictionary that contains information on the allowed devices for a given user
group.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><dl class="simple">
<dt><strong>user_group</strong>: <em>str</em></dt><dd><p>the name of the user group (e.g. ‘admin’).</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
<dt><strong>devices_allowed</strong>: <em>dict</em></dt><dd><p>the dictionary that contains information on the allowed devices.
Dictionary keys are device names.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>Immediate: no follow-up requests are required.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="permissions-reload">
<span id="method-permissions-reload"></span><h4><strong>‘permissions_reload’</strong><a class="headerlink" href="#permissions-reload" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘permissions_reload’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Reloads the list of allowed plans and devices and user group permission from
the default location or the location set using command line parameters. Use this
method to reload permissions if the files were changed on disk.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>Immediate: no follow-up requests are required.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="history-get">
<span id="method-history-get"></span><h4><strong>‘history_get’</strong><a class="headerlink" href="#history-get" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘history_get’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Returns the list of items in the plan history.</p>
<p><em>The request always succeeds</em>.</p>
</td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
<dt><strong>items</strong>: <em>list</em></dt><dd><p>list of items in the plan history, each item is represented by a dictionary of
item parameters. Currently the plan history may contain only plans.</p>
</dd>
<dt><strong>plan_history_uid</strong>: <em>str</em></dt><dd><p>current plan history UID.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>Immediate: no follow-up requests are required.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="history-clear">
<span id="method-history-clear"></span><h4><strong>‘history_clear’</strong><a class="headerlink" href="#history-clear" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘history_clear’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Clear the contents of the plan history.</p>
<p><em>The request always succeeds</em>.</p>
</td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>Immediate: no follow-up requests are required.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="environment-open">
<span id="method-environment-open"></span><h4><strong>‘environment_open’</strong><a class="headerlink" href="#environment-open" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘environment_open’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Initiate the creation of a new RE Worker environment. The request will
succeed only if RE Manager is in ‘idle’ state and the environment does not exist.
RE Worker environment must be created before plans could be executed. To restart
the environment, close the existing environment first by sending ‘environment_close’
request. To destroy ‘frozen’ environment, use ‘environment_destroy’ method.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>The request only initiates the sequence of creating a new environment. It may take
a long time to start the environment. Monitor ‘manager_state’
and ‘worker_environment_exists’ status fields (‘status’ method) to detect when
the operation is completed: ‘manager_state’ should have the value ‘opening_environment’
while operation is in progress and change to ‘idle’ when the operation completes and
‘worker_environment_exists’ is set to True if environment was created successfully.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="environment-close">
<span id="method-environment-close"></span><h4><strong>‘environment_close’</strong><a class="headerlink" href="#environment-close" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘environment_close’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Initiate the operation of closing the existing RE Worker environment. Fails if there
is no existing environment or if RE Manager is not in ‘idle’ state. Use
‘environment_destroy’ method to close a non-responsive RE Worker environment.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>The request initiates the sequence of closing the environment.
Monitor ‘manager_state’ and ‘worker_environment_exists’ status fields
(see ‘status’ method) to detection when the operation coompletes:
‘manager_state’ is expected to have the value ‘closing_environment’
while operation is in progress and switch to ‘idle’ when the operation completes
and ‘worker_environment_exists’ is set False if environment was closed successfully.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="environment-destroy">
<span id="method-environment-destroy"></span><h4><strong>‘environment_destroy’</strong><a class="headerlink" href="#environment-destroy" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘environment_destroy’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Initiate the operation of destroying of the existing (unresponsive) RE Worker
environment. The operation fails if there is no existing environment.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>The request initiates the sequence of destroying the environment.
Monitor ‘manager_state’ and ‘worker_environment_exists’ status fields
(see ‘status’ method): ‘manager_state’ is expected to have the value
‘destroying_environment’ while operation is in progress and switch to ‘idle’ when
the operation completes and ‘worker_environment_exists’ is set False if environment
was destroyed successfully.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="queue-mode-set">
<span id="method-queue-mode-set"></span><h4><strong>‘queue_mode_set’</strong><a class="headerlink" href="#queue-mode-set" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘queue_mode_set’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Sets parameters that define the mode of plan queue execution. The key/value pairs of the <em>‘mode’</em>
dictionary represent names and values of the parameters that need to be changed.
If <em>mode={}</em> then the mode will not be changed. To reset the mode parameters to the
built-in default values, set <em>mode=”default”</em>. The request fails if the <em>‘mode’</em> parameter
is not a dictionary or the <em>‘default’</em> string, the dictionary contains unsupported keys
(mode parameters) or key values are of unsupported type. Supported mode parameters
(dictionary keys): <em>‘loop’</em> (<em>True/False</em>) - enables/disables loop mode.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><dl class="simple">
<dt><strong>mode</strong>: <em>dict</em> or <em>str</em></dt><dd><p>the dictionary of queue mode parameters or <em>‘default’</em> string. Supported keys of
the dictionary: <em>‘loop’</em> (<em>boolean</em>).</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>Immediate: no follow-up requests are required.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="queue-get">
<span id="method-queue-get"></span><h4><strong>‘queue_get’</strong><a class="headerlink" href="#queue-get" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘queue_get’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Returns the items in the plan queue. The returned list of items may contain plans or
instructions. Each item is represented as a dictionary. Plans and instructions can be
distinguished by checking the value with the key ‘item_type’: ‘plan’ indicates that
the item is a plan, while ‘instruction’ indicates that it is an instruction.</p>
<p><em>The request always succeeds</em>.</p>
</td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
<dt><strong>items</strong>: <em>list</em></dt><dd><p>list of queue items</p>
</dd>
<dt><strong>running_item</strong>: <em>dict</em></dt><dd><p>parameters of the item representing currently running plan, empty dictionary ({}) is
returned if no plan is currently running.</p>
</dd>
<dt><strong>plan_queue_uid</strong>: <em>str</em></dt><dd><p>current plan queue UID.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>Immediate: no follow-up requests are required.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="queue-item-add">
<span id="method-queue-item-add"></span><h4><strong>‘queue_item_add’</strong><a class="headerlink" href="#queue-item-add" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘queue_item_add’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Add item to the queue. The item may be a plan or an instruction. By default the
item is added to the back of the queue. Alternatively the item can be placed at
the desired position in the queue or before or after one of the existing items.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><dl class="simple">
<dt><strong>item</strong>: <em>dict</em></dt><dd><p>the dictionary of plan or instruction parameters. Plans are distinguished from
instructions based the value of the required parameter ‘item_type’. Currently
supported item types are ‘plan’ and ‘instruction’.</p>
</dd>
<dt><strong>user_group</strong>: <em>str</em></dt><dd><p>the name of the user group (e.g. ‘admin’).</p>
</dd>
<dt><strong>user</strong>: <em>str</em></dt><dd><p>the name of the user (e.g. ‘John Doe’). The name is included in the item metadata
and may be used to identify the user who added the item to the queue. It is not
passed to the Run Engine or included in run metadata.</p>
</dd>
<dt><strong>pos</strong>: <em>int</em>, <em>‘front’</em> or <em>‘back’</em> (optional)</dt><dd><p>position of the item in the queue. RE Manager will attempt to insert the item
at the specified position. The position may be positive or negative (counted
from the back of the queue) integer. If ‘pos’ value is a string ‘front’ or ‘back’,
then the item is inserted at the front or the back of the queue.</p>
</dd>
<dt><strong>before_uid</strong>, <strong>after_uid</strong>: <em>str</em> (optional)</dt><dd><p>insert the item before or after the item with the given item UID.</p>
</dd>
</dl>
<p><em>Parameters ‘pos’, ‘before_uid’ and ‘after_uid’ are mutually exclusive.</em></p>
</td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
<dt><strong>qsize</strong>: <em>int</em> or <em>None</em></dt><dd><p>the number of items in the plan queue after the plan was added if
the operation was successful, <em>None</em> otherwise</p>
</dd>
<dt><strong>item</strong>: <em>dict</em> or <em>None</em> (optional)</dt><dd><p>the inserted item. The item contains the assigned item UID. In case of error
the item may be returned without modification (with assigned UID). <em>None</em> will be
returned if request does not contain item parameters.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>Immediate: no follow-up requests are required.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="queue-item-add-batch">
<span id="method-queue-item-add-batch"></span><h4><strong>‘queue_item_add_batch’</strong><a class="headerlink" href="#queue-item-add-batch" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘queue_item_add_batch’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Add a batch of items to the queue. The behavior of the function is identical to
<strong>queue_item_add</strong>, except that it adds the batch of items instead of a single item.
The batch may consist of any number of supported items (see <strong>queue_item_add</strong> method).
Each item in the queue must successfully pass validation before any items are added
to the queue. If an item fails validation, the whole batch is rejected. In case the
batch is rejected, the function returns the detailed report for each item: <em>success</em>
status indicating if the item passed validation and error message in case
validation failed.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><dl class="simple">
<dt><strong>items</strong>: <em>list</em></dt><dd><p>the list containing a batch of items. Each element is a dictionary containing
valid set of item parameters (see instructions for <em>queue_item_add</em> API).
An empty item list will also be accepted.</p>
</dd>
<dt><strong>user_group</strong>: <em>str</em></dt><dd><p>the name of the user group (e.g. ‘admin’).</p>
</dd>
<dt><strong>user</strong>: <em>str</em></dt><dd><p>the name of the user (e.g. ‘John Doe’). The name is included in the item metadata
and may be used to identify the user who added the item to the queue. It is not
passed to the Run Engine or included in run metadata.</p>
</dd>
<dt><strong>pos</strong>: <em>int</em>, <em>‘front’</em> or <em>‘back’</em> (optional)</dt><dd><p>position of the first item of the batch in the queue. RE Manager will attempt to
insert the batch of items so that the first item in the batch is at the specified
position. The position may be positive or negative (counted from the back of the queue)
integer. If ‘pos’ value is a string ‘front’ or ‘back’, then the items are inserted at
the front or the back of the queue.</p>
</dd>
<dt><strong>before_uid</strong>, <strong>after_uid</strong>: <em>str</em> (optional)</dt><dd><p>insert the batch of items before or after the item with the given item UID.</p>
</dd>
</dl>
<p><em>Parameters ‘pos’, ‘before_uid’ and ‘after_uid’ are mutually exclusive.</em></p>
</td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl>
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully. The request fails if any item
fails validation. The queue is not expected to be modified if the request fails.
If the parameter is <em>True</em>, then validation of all items succeeded: there is no
need to verify <em>success</em> status for each item returned in <em>item_list</em> parameter.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
<dt><strong>qsize</strong>: <em>int</em> or <em>None</em></dt><dd><p>the number of items in the plan queue after processing the request. The correct
queue size may be returned even if the operation fails. In rare failing cases
the parameter may return <em>None</em>.</p>
</dd>
<dt><strong>items</strong>: <em>list</em></dt><dd><p>the list of processed items. Each item contains inserted item (in case of success),
passed item or None (in case of error). See notes for return <em>item</em> parameter
for <em>queue_add_item</em> API.</p>
</dd>
<dt><strong>results</strong>: <em>list</em></dt><dd><blockquote>
<div><p>the list of reports for each processed item. The size of the list is equal to the
size of the list returned as <em>items</em> parameter. Each element of the list is
a dictionary containing the following keys:</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>success</strong> - boolean value indicating if the validation of the item was successful.</p></li>
<li><p><strong>msg</strong> - error message in case validation of the item failed.</p></li>
</ul>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>Immediate: no follow-up requests are required.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="queue-item-update">
<span id="method-queue-item-update"></span><h4><strong>‘queue_item_update’</strong><a class="headerlink" href="#queue-item-update" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘queue_item_update’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Update the existing item in the queue. The method is intended for editing queue items,
but may be used for replacing the existing items with completely different ones.
The updated item may be a plan or an instruction. The item parameter ‘item_uid’ must
be set to a UID of an existing queue item that is expected to be replaced. The method
fails if the item UID is not found. By default, the UID of the updated item is not changed
and ‘user’ and ‘user_group’ parameters are set to the values provided in the request.
The ‘user_group’ is also used for validation of submitted item. If it is preferable
to replace the item UID with a new random UID (e.g. if the item is replaced with
completely different item), the method should be called with the optional parameter
‘replace=True’.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><dl class="simple">
<dt><strong>item</strong>: <em>dict</em></dt><dd><p>the dictionary of plan or instruction parameters. Plans are distinguished from
instructions based the value of the required parameter ‘item_type’. Currently
supported item types are ‘plan’ and ‘instruction’.</p>
</dd>
<dt><strong>user_group</strong>: <em>str</em></dt><dd><p>the name of the user group (e.g. ‘admin’).</p>
</dd>
<dt><strong>user</strong>: <em>str</em></dt><dd><p>the name of the user (e.g. ‘John Doe’). The name is included in the item metadata
and may be used to identify the user who added the item to the queue. It is not
passed to the Run Engine or included in run metadata.</p>
</dd>
<dt><strong>replace</strong>: <em>boolean</em> (optional)</dt><dd><p>replace the updated item UID with the new random UID (True) or keep the original
UID (False). Default value is (False).</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
<dt><strong>qsize</strong>: <em>int</em> or <em>None</em></dt><dd><p>the number of items in the plan queue after the plan was added if
the operation was successful, <em>None</em> otherwise</p>
</dd>
<dt><strong>item</strong>: <em>dict</em> or <em>None</em> (optional)</dt><dd><p>the inserted item. The item contains the assigned item UID. In case of error
the item may be returned without modification (with assigned UID). <em>None</em> will be
returned if request does not contain item parameters.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>Immediate: no follow-up requests are required.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="queue-item-get">
<span id="method-queue-item-get"></span><h4><strong>‘queue_item_get’</strong><a class="headerlink" href="#queue-item-get" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘queue_item_get’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Read item from the queue. By default the item from the back of the queue is returned.
Alternatively the item at the given position or the item with the given UID
may be requested.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><dl class="simple">
<dt><strong>pos</strong>: <em>int</em>, <em>‘front’</em> or <em>‘back’</em> (optional)</dt><dd><p>position of the item in the queue. RE Manager will attempt to return the item
at the specified position. The position may be positive or negative (counted
from the back of the queue) integer. If ‘pos’ value is a string ‘front’ or ‘back’,
then the item at the front or the back of the queue is returned.</p>
</dd>
<dt><strong>uid</strong>: <em>str</em> (optional)</dt><dd><p>uid of the requested item.</p>
</dd>
</dl>
<p><em>Parameters ‘pos’ and ‘uid’ are mutually exclusive.</em></p>
</td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
<dt><strong>item</strong>: <em>dict</em></dt><dd><p>the dictionary of item parameters, ({}) if operation failed.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>Immediate: no follow-up requests are required.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="queue-item-remove">
<span id="method-queue-item-remove"></span><h4><strong>‘queue_item_remove’</strong><a class="headerlink" href="#queue-item-remove" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘queue_item_remove’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Remove item from the queue. By default the last item in the queue is removed.
Alternatively the position or UID of the item can be specified.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><dl class="simple">
<dt><strong>pos</strong>: <em>int</em>, <em>‘front’</em> or <em>‘back’</em> (optional)</dt><dd><p>position of the item in the queue. RE Manager will attempt to remove the item
at the specified position. The position may be positive or negative (counted
from the back of the queue) integer. If ‘pos’ value is a string ‘front’ or ‘back’,
then the item is removed from the front or the back of the queue.</p>
</dd>
<dt><strong>uid</strong>: <em>str</em> (optional)</dt><dd><p>uid of the requested item.</p>
</dd>
</dl>
<p><em>Parameters ‘pos’ and ‘uid’ are mutually exclusive.</em></p>
</td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
<dt><strong>item</strong>: <em>dict</em></dt><dd><p>the dictionary of parameters of the removed item, ({}) if operation failed.</p>
</dd>
<dt><strong>qsize</strong>: <em>int</em> or <em>None</em></dt><dd><p>the number of items in the plan queue after the plan was added if
the operation was successful, <em>None</em> otherwise</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>Immediate: no follow-up requests are required.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="queue-item-move">
<span id="method-queue-item-move"></span><h4><strong>‘queue_item_move’</strong><a class="headerlink" href="#queue-item-move" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘queue_item_move’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Move item to a different position in the queue.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><dl class="simple">
<dt><strong>pos</strong>: <em>int</em>, <em>‘front’</em> or <em>‘back’</em></dt><dd><p>current position of the item in the queue. Integer number can be negative.</p>
</dd>
<dt><strong>uid</strong>: <em>str</em> (optional)</dt><dd><p>uid of the item to move.</p>
</dd>
<dt><strong>pos_dest</strong>: <em>int</em>, <em>‘front’</em>, <em>‘back’</em></dt><dd><p>new position of the item. Integer number can be negative.</p>
</dd>
<dt><strong>before_uid</strong>, <strong>after_uid</strong>: <em>str</em></dt><dd><p>UID of an existing item in the queue. The selected item will be moved
before or after this item.</p>
</dd>
</dl>
<p><em>Parameters ‘pos’ and ‘uid’ are mutually exclusive, but at least one of them must
be specified.</em></p>
<p><em>Parameters ‘pos_dest’, ‘before_uid’ and ‘after_uid’ are mutually exclusive,
but at least one of them must be specified.</em></p>
</td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
<dt><strong>item</strong>: <em>dict</em></dt><dd><p>the dictionary of parameters of the moved item, ({}) if operation failed.</p>
</dd>
<dt><strong>qsize</strong>: <em>int</em> or <em>None</em></dt><dd><p>the size of the queue.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>Immediate: no follow-up requests are required.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="queue-clear">
<span id="method-queue-clear"></span><h4><strong>‘queue_clear’</strong><a class="headerlink" href="#queue-clear" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘queue_clear’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Remove all items from the plan queue. The currently running plan does not belong to
the queue and is not affected by this operation. If the plan fails or its execution
is stopped, it will be pushed to the beginning of the queue.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>Immediate: no follow-up requests are required.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="queue-start">
<span id="method-queue-start"></span><h4><strong>‘queue_start’</strong><a class="headerlink" href="#queue-start" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘queue_start’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Start execution of the queue. The operation succeeds only if RE Manager is in
‘idle’ state and RE Worker environment exists. This operation only initiates
the process of starting the execution of the queue.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>The request initiates the operation of starting the queue. Verify that the queue
is running by checking the status fields: ‘manager_state’ is expected to have
the value ‘executing_queue’ and ‘running_item_uid’ should return UID of
the running plan. It is possible that the queue execution is successfully started,
but immediately stopped (queue is empty, queue contains a very short plan,
the first plan in the queue fails to start, the first item in the queue is ‘queue_stop’
instruction etc.). RE Manager is expected to handle those cases in orderly way, but
the client should be capable of detecting and handling those events as well.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="queue-stop">
<span id="method-queue-stop"></span><h4><strong>‘queue_stop’</strong><a class="headerlink" href="#queue-stop" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘queue_stop’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Request RE Manager to stop execution of the queue after completion of the currently
running plan. The request succeeds only if the queue is currently running
(‘manager_state’ status field has value ‘executing_queue’). The ‘queue_stop_pending’
status field can be used at any time to verify if the request is pending.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>Immediate: no follow-up requests are required.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="queue-stop-cancel">
<span id="method-queue-stop-cancel"></span><h4><strong>‘queue_stop_cancel’</strong><a class="headerlink" href="#queue-stop-cancel" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘queue_stop_cancel’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Cancel the pending request to stop execution of the queue after the currently
running plan.</p>
<p><em>The request always succeeds</em>.</p>
</td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>Immediate: no follow-up requests are required.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="re-pause">
<span id="method-re-pause"></span><h4><strong>‘re_pause’</strong><a class="headerlink" href="#re-pause" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘re_pause’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Request Run Engine to pause currently running plan. The request will fail if RE Worker
environment does not exist or no plan is currently running. The request only initates
the sequence of pausing the plan.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><dl class="simple">
<dt><strong>option</strong>: <em>‘immediate’</em> or <em>‘deferred’</em></dt><dd><p>pause the plan immediately (roll back to the previous checkpoint) or continue
to the next checkpoint.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>The request only initiates the operation of pausing the plan. Wait until the plan is
paused by polling ‘manager_state’ status field (expected value is ‘paused’).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="re-resume-re-stop-re-abort-re-halt">
<span id="method-re-resume-stop-abort-halt"></span><h4><strong>‘re_resume’, ‘re_stop’, ‘re_abort’, ‘re_halt’</strong><a class="headerlink" href="#re-resume-re-stop-re-abort-re-halt" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘re_resume’</strong>, <strong>‘re_stop’</strong>, <strong>‘re_abort’</strong>, <strong>‘re_halt’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Request Run Engine to resume, stop, abort or halt a paused plan. Fails if RE Worker
environment does not exist or ‘manager_state’ status field value is not ‘paused’.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>The request only initiates the operation. Wait until the plan is paused by monitoring
‘manager_state’ status field (expected value is ‘executing_queue’ if execution is
resumed or ‘idle’ if execution was stopped).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="re-runs">
<span id="method-re-runs"></span><h4><strong>‘re_runs’</strong><a class="headerlink" href="#re-runs" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘re_runs’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Request the list of active runs generated by the currently executed plans.
The full list of active runs includes the runs that are currently open (‘open’ runs) and
the runs that were already closed (‘closed’ runs). Simple single-run plans will have
at most one run in the list. Monitor ‘run_list_uid’ RE Manager status field and
retrieve the updated list once UID is changed. The UID of the retrieved list is
included in the returned parameters</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><dl class="simple">
<dt><strong>option</strong>: <em>‘active’</em>, <em>‘open’</em> or <em>‘closed’</em> (optional)</dt><dd><p>select between full list of ‘active’ (default) runs, the list of ‘open’ or ‘closed’
runs.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
<dt><strong>run_list</strong>: <em>list(dict)</em></dt><dd><p>the requested list of runs, list items are dictionaries with keys ‘uid’ (str),
‘is_open’ (boolean) and ‘exit_status’ (str or None). See Bluesky documentation
for ‘exit_status’ values.</p>
</dd>
<dt><strong>run_list_uid</strong>: str</dt><dd><p>UID of the returned run list, identical to the RE Manager status field with
the same name.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>Immediate: no follow-up requests are required.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="manager-stop">
<span id="method-manager-stop"></span><h4><strong>‘manager_stop’</strong><a class="headerlink" href="#manager-stop" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘manager_stop’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Exit RE Manager application. Clients will probably not need to initiate exit remotely,
but ability to do so is extremely useful for automated testing.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><dl class="simple">
<dt><strong>option</strong>: <em>‘safe_on’</em> or <em>‘safe_off’</em> (optional)</dt><dd><p>if the option of ‘safe_on’ is selected (default), then the request fails
unless ‘manager_state’ status field is ‘idle’ (no plans are running).
If the option is ‘safe_off’ then RE Worker environment is destroyed
(worker process is terminated and all data that was not saved is discarded).</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><dl class="simple">
<dt><strong>success</strong>: <em>boolean</em></dt><dd><p>indicates if the request was processed successfully.</p>
</dd>
<dt><strong>msg</strong>: <em>str</em></dt><dd><p>error message in case of failure, empty string (‘’) otherwise.</p>
</dd>
</dl>
</td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>The request only initiates the operation of exiting RE Manager. If the request succeeds
it may be expected that RE Manager application will eventually be exited and stops it
stops responding to requests.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="manager-kill">
<span id="method-manager-kill"></span><h4><strong>‘manager_kill’</strong><a class="headerlink" href="#manager-kill" title="Permalink to this headline">¶</a></h4>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Method</p></td>
<td><p><strong>‘manager_kill’</strong></p></td>
</tr>
<tr class="row-even"><td><p>Description</p></td>
<td><p>Freezes RE Manager process by stopping the asyncio event loop. By design, the manager
process is expected to restart after 5 seconds of inactivity. The restart of the manager
process should not affect the state of the queue or running plans. This function is
implemented for testing purposes only. There is no practical reason for a client
application to send this request.</p></td>
</tr>
<tr class="row-odd"><td><p>Parameters</p></td>
<td><p>—</p></td>
</tr>
<tr class="row-even"><td><p>Returns</p></td>
<td><p>RE Manager will not respond to the request.</p></td>
</tr>
<tr class="row-odd"><td><p>Execution</p></td>
<td><p>Immediate: no follow-up requests are required.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="generated/bluesky_queueserver.manager.comms.ZMQCommSendAsync.html" class="btn btn-neutral float-right" title="bluesky_queueserver.manager.comms.ZMQCommSendAsync" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="usage.html" class="btn btn-neutral float-left" title="Usage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2019, Brookhaven National Laboratory.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>