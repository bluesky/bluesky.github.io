<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>bluesky_queueserver_api.zmq.REManagerAPI.function_execute &mdash; Bluesky Queue Server API 0.post1+ge1cb67d documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/plot_directive.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="bluesky_queueserver_api.zmq.REManagerAPI.task_status" href="bluesky_queueserver_api.zmq.REManagerAPI.task_status.html" />
    <link rel="prev" title="bluesky_queueserver_api.zmq.REManagerAPI.script_upload" href="bluesky_queueserver_api.zmq.REManagerAPI.script_upload.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Bluesky Queue Server API
          </a>
              <div class="version">
                0.post1+ge1cb67d
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api-reference.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../api-reference.html#generation-of-queue-items">Generation of Queue Items</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference.html#miscellaneous-api">Miscellaneous API</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../api-reference.html#synchronous-communication-with-0mq-server">Synchronous Communication with 0MQ Server</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="bluesky_queueserver_api.zmq.REManagerAPI.html">bluesky_queueserver_api.zmq.REManagerAPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="bluesky_queueserver_api.zmq.REManagerAPI.close.html">bluesky_queueserver_api.zmq.REManagerAPI.close</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api-reference.html#low-level-api">Low-Level API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api-reference.html#api-for-controlling-re-manager">API for controlling RE Manager</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api-reference.html#api-for-controlling-re-environment">API for controlling RE Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api-reference.html#api-for-monitoring-available-resources">API for Monitoring Available Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api-reference.html#api-for-management-of-re-queue">API for management of RE Queue</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api-reference.html#api-for-controlling-re-history">API for Controlling RE History</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../api-reference.html#api-for-executing-tasks">API for Executing Tasks</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="bluesky_queueserver_api.zmq.REManagerAPI.script_upload.html">bluesky_queueserver_api.zmq.REManagerAPI.script_upload</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">bluesky_queueserver_api.zmq.REManagerAPI.function_execute</a></li>
<li class="toctree-l4"><a class="reference internal" href="bluesky_queueserver_api.zmq.REManagerAPI.task_status.html">bluesky_queueserver_api.zmq.REManagerAPI.task_status</a></li>
<li class="toctree-l4"><a class="reference internal" href="bluesky_queueserver_api.zmq.REManagerAPI.task_result.html">bluesky_queueserver_api.zmq.REManagerAPI.task_result</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../api-reference.html#api-for-controlling-run-engine">API for controlling Run Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="../api-reference.html#api-for-monitoring-console-output-of-re-manager">API for monitoring console output of RE manager</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference.html#asynchronous-communication-with-0mq-server">Asynchronous Communication with 0MQ Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference.html#synchronous-communication-with-http-server">Synchronous Communication with HTTP Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api-reference.html#asynchronous-communication-with-http-server">ASynchronous Communication with HTTP Server</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../release-history.html">Release History</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Bluesky Queue Server API</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../api-reference.html">API Reference</a> &raquo;</li>
      <li>bluesky_queueserver_api.zmq.REManagerAPI.function_execute</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/generated/bluesky_queueserver_api.zmq.REManagerAPI.function_execute.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="bluesky-queueserver-api-zmq-remanagerapi-function-execute">
<h1>bluesky_queueserver_api.zmq.REManagerAPI.function_execute<a class="headerlink" href="#bluesky-queueserver-api-zmq-remanagerapi-function-execute" title="Permalink to this headline">¶</a></h1>
<dl class="py method">
<dt class="sig sig-object py" id="bluesky_queueserver_api.zmq.REManagerAPI.function_execute">
<span class="sig-prename descclassname"><span class="pre">REManagerAPI.</span></span><span class="sig-name descname"><span class="pre">function_execute</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">item</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">run_in_background</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bluesky_queueserver_api.zmq.REManagerAPI.function_execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Start execution of a function in RE Worker namespace. The function must be defined in the
namespace (in startup code or a script uploaded using <em>script_upload</em> method). The function
may be executed as a foreground task (only if RE Manager and RE Worker environment are IDLE)
or as a background task. Background tasks are executed in separate threads and may
consume processing or memory resources and interfere with running plans or other tasks.
RE Manager does not guarantee thread safety of the user code running in the background.
Developers of startup scripts are fully responsible for preventing threading issues.</p>
<p>The method allows to pass parameters (<em>args</em> and <em>kwargs</em>) to the function. Once the task
is completed, the results of the function execution, including the return value, can be
loaded using <em>task_result</em> method. If the task fails, the return value is a string
with full traceback of the raised exception. The data types of parameters and return
values must be JSON serializable. The task fails if the return value can not be serialized.</p>
<p>The method only <strong>initiates</strong> execution of the function. If the request is successful
(<code class="docutils literal notranslate"><span class="pre">&quot;success&quot;:</span> <span class="pre">True</span></code>), the server starts the task, which attempts to execute the function
with given name and parameters. The function may still fail to start (e.g. if the user is
permitted to execute function with the given name, but the function is not defined
in the namespace). Use <code class="docutils literal notranslate"><span class="pre">task_result</span></code> API with the returned <code class="docutils literal notranslate"><span class="pre">task_uid</span></code> to
check the status of the tasks and load the result after the task is completed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>item: BItem, BFunc or dict</strong></dt><dd><p>BItem, BFunc or dictionary with function name, <em>args</em> and <em>kwargs</em>. The structure of
dictionary is the same as for items representing plans and instructions, except that
<code class="docutils literal notranslate"><span class="pre">item_type</span></code> is <code class="docutils literal notranslate"><span class="pre">&quot;function&quot;</span></code>.</p>
</dd>
<dt><strong>run_in_background: boolean (optional, default False)</strong></dt><dd><p>Set this parameter True to upload and execute the script in the background
(while a plan or another foreground task is running). Generally, it is not
recommended to update RE Worker namespace in the background. Background tasks
are executed in separate threads and only thread-safe scripts should be uploaded
in the background. <strong>Developers of data acquisition workflows and/or user specific
code are responsible for thread safety.</strong></p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>response: dict</dt><dd><p>Dictionary keys:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">success</span></code>: <em>boolean</em> - success of the request.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">msg</span></code>: <em>str</em> - error message in case the request is rejected by RE Manager
or operation failed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">item</span></code> - dictionary of function parameters (may be <code class="docutils literal notranslate"><span class="pre">None</span></code> if operation fails).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">task_uid</span></code> - UID of the started task.</p></li>
</ul>
</dd>
</dl>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><dl class="simple">
<dt>RequestTimeoutError, RequestFailedError, RequestError, ClientError</dt><dd><p>All exceptions raised by <code class="docutils literal notranslate"><span class="pre">send_request</span></code> API.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">function</span> <span class="o">=</span> <span class="n">BFunc</span><span class="p">(</span><span class="s2">&quot;function_sleep&quot;</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

<span class="c1"># Synchronous code (0MQ, HTTP)</span>
<span class="n">RM</span><span class="o">.</span><span class="n">function_execute</span><span class="p">(</span><span class="n">function</span><span class="p">)</span>

<span class="c1"># Asynchronous code (0MQ, HTTP)</span>
<span class="k">await</span> <span class="n">RM</span><span class="o">.</span><span class="n">function_execute</span><span class="p">(</span><span class="n">function</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="bluesky_queueserver_api.zmq.REManagerAPI.script_upload.html" class="btn btn-neutral float-left" title="bluesky_queueserver_api.zmq.REManagerAPI.script_upload" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="bluesky_queueserver_api.zmq.REManagerAPI.task_status.html" class="btn btn-neutral float-right" title="bluesky_queueserver_api.zmq.REManagerAPI.task_status" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Brookhaven National Laboratory.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>